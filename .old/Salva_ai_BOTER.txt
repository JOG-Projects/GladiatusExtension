// ==UserScript==
// @description     Script Auto
// @author          100por1
// @name            Script-Auto
// @namespace       100por1Gladiador
// @include         *.gladiatus.gameforge.com/*
// @require         https://code.jquery.com/jquery-latest.js
// @version         0.0.1
// @grant           GM_setValue
// @grant           GM_getValue
// @include     	*100por1.com/*
// @grant       	GM_xmlhttpRequest
// ==/UserScript==
var $ = jQuery.noConflict();
var usglAuto = 'User',
    MinListaBranca = 50000,
    hostExterno = 'https://i.ibb.co/',
    my_gold = $("#sstat_gold_val").length>0 ? document.getElementById("sstat_gold_val").innerHTML.replace(/\./g, "").toInt() : 0,
    id_sessao = window.location.href.replace(/.+sh=/,""),
    db = [],
    ArenaForte=[],
    ListaBranca=[],
	atArena = '',
    /* tab_sangue = $("#header_values_hp_bar").length>0 ? document.getElementById("header_values_hp_bar").getAttribute("data-tooltip").split('["Pontos de vida:","') : 0, */
    tab_sangue = $("#header_values_hp_bar").length>0 ? document.getElementById("header_values_hp_bar").getAttribute("data-value").trim() : '0',
    /*tab_sague_total = tab_sangue.length>0 ? tab_sangue[1].split('\\/')[1].split('"],[')[0].trim() : 0,*/
    tab_sague_total = $("#header_values_hp_bar").length>0 ? document.getElementById("header_values_hp_bar").getAttribute("data-max-value").trim() : '0',
    GladiatusFuncoes = {
        get_server : function(){
            return document.location.href.split(".gladiatus")[0].split("//")[1];
        },
        get_base : function(){
            let base = window.location.toString().split("/");
            return 'https://'+base[2]+'/game/index.php?';
        },
        send_mailNotify : function(msgs){
            console.log('EMAIL DISABLE!');
            /* let myData = new FormData();
            myData.append("from", email_jogo);
            myData.append("msgs", msgs);
            GM_xmlhttpRequest({
                method: "POST",
                url: hostExterno+"avisa_msg.php",
                data: myData,
                onload: function(response) {
                    if(GladiatusFuncoes.trim(response.responseText)=='ok'){
                        return GladiatusFuncoes.trim(response.responseText);
                    }
                }
            }); */
        },
        get_valeur_inv : function(id){
            let texte = $("#tOoLtIp_"+id).text(),
                val = -1;
            if(texte){
                val = texte.split("N.B")[0].split("Valor")[texte.split("N.B")[0].split("Valor").length-1].replace(".","");
            }
            if(val){
                return val;
            }else{
                return 0;
            }
        },
        get_time_Masmorra : function(){
            let time = document.getElementById("cooldown_bar_text_dungeon").innerHTML.split(":");
            let res = parseInt(time[0]*3600) + parseInt(time[1]*60) + parseInt(time[2]);
            if(res>0){
                return res;
            }else{
                return 0;
            }
        },
        get_time_before_arena : function(){
            let time = document.getElementById("cooldown_bar_text_arena").innerHTML.split(":");
            let res = parseInt(time[0]*3600) + parseInt(time[1]*60) + parseInt(time[2]);
            if(res>0){
                return res;
            }else{
                return 0;
            }
        },
        get_time_before_pEXP : function(){
            let time = document.getElementById("cooldown_bar_text_expedition").innerHTML.split(":");
            let res = parseInt(time[0]*3600) + parseInt(time[1]*60) + parseInt(time[2]);
            if(res>0){
                return res;
            }else{
                return 0;
            }
        },
        get_time_before_pro : function(){
            let time = document.getElementById("cooldown_bar_text_ct").innerHTML.split(":");
            let res = parseInt(time[0]*3600) + parseInt(time[1]*60) + parseInt(time[2]);
            if(res>0){
                return res;
            }else{
                return 0;
            }
        },
        get_time_before_quest : function(){
            let res = GM_getValue(GladiatusFuncoes.get_server()+"tempo_nova_missao");
            if(res>=0){
                return res;
            }else{
                res =0;
                return res;
            }
        },
        get_time_before_evento : function(){
            let res = GM_getValue(GladiatusFuncoes.get_server()+"tempo_evento");
            if(res>=0){
                return res;
            }else{
                res =0;
                return res;
            }
        },
        get_time_to_reload : function(){
            let time_to_reload_pEXP = '1000000',
                time_to_reload_pro = '1000000',
                time_to_reload_masmorra ='1000000',
                time_to_reload_arena = '1000000',
                time_to_reload_quest = '1000000',
                time_to_reload_evento = '1000000',
                time_to_reload =0;

            if(GM_getValue(GladiatusFuncoes.get_server()+"ct_quest")==1){
                time_to_reload_pro = parseInt(GladiatusFuncoes.get_time_before_pro())*1000;
            }
            if(GM_getValue(GladiatusFuncoes.get_server()+"mas_quest")==1){
                time_to_reload_masmorra = parseInt(GladiatusFuncoes.get_time_Masmorra())*1000;
            }
            if(GM_getValue(GladiatusFuncoes.get_server()+"arena_quest")==1){
                time_to_reload_arena = parseInt(GladiatusFuncoes.get_time_before_arena())*1000;
            }
            if(GM_getValue(GladiatusFuncoes.get_server()+"exp_quest")==1){
                time_to_reload_pEXP = parseInt(GladiatusFuncoes.get_time_before_pEXP())*1000;
            }
            if(GM_getValue(GladiatusFuncoes.get_server()+"missoes_quest")==1){
                time_to_reload_quest = parseInt(GladiatusFuncoes.get_time_before_quest());
            }
            if(GM_getValue(GladiatusFuncoes.get_server()+"eventoEspecial")==1){
                time_to_reload_evento = parseInt(GladiatusFuncoes.get_time_before_evento());
            }

            time_to_reload = Math.min(time_to_reload_pEXP,time_to_reload_pro,time_to_reload_masmorra,time_to_reload_arena,time_to_reload_quest,time_to_reload_evento);

            if(time_to_reload==time_to_reload_quest){
                GM_setValue(GladiatusFuncoes.get_server()+"action_encours","Missão");
                GM_setValue(GladiatusFuncoes.get_server()+"img_action_encours",hostExterno+"2dT3wtn/powerup-1.gif");
            }else if(time_to_reload==time_to_reload_pro){
                GM_setValue(GladiatusFuncoes.get_server()+"action_encours","Circus Turma");
                GM_setValue(GladiatusFuncoes.get_server()+"img_action_encours",hostExterno+"cQ3sdz3/icon-grouparena.gif");
            } else if(time_to_reload==time_to_reload_arena){
                GM_setValue(GladiatusFuncoes.get_server()+"action_encours","Arena");
                GM_setValue(GladiatusFuncoes.get_server()+"img_action_encours",hostExterno+"VT6Xqj4/icon-arena.gif");
            } else if(time_to_reload==time_to_reload_masmorra){
                GM_setValue(GladiatusFuncoes.get_server()+"action_encours","Masmorra");
                GM_setValue(GladiatusFuncoes.get_server()+"img_action_encours",hostExterno+"mRxbHt9/icon-dungeonpoints.gif");
            } else if(time_to_reload==time_to_reload_pEXP){
                GM_setValue(GladiatusFuncoes.get_server()+"action_encours","Expedição");
                GM_setValue(GladiatusFuncoes.get_server()+"img_action_encours",hostExterno+"fr3VFZ3/icon-expeditionpoints.gif");
            }else if(time_to_reload==time_to_reload_evento){
                GM_setValue(GladiatusFuncoes.get_server()+"action_encours","Evento");
                GM_setValue(GladiatusFuncoes.get_server()+"img_action_encours",hostExterno+"SJkHSrd/evento-Oasis.jpg");
            }
            return time_to_reload;
        },
		auto_arena : function(){
			let arenaAtaque='', QuemFight = '';
			if(window.location.href.indexOf("mod=arena&submod=serverArena&aType=2")!=-1){
				let low_lvl =200,
					low_lvl_index = usglAuto,
					div_players = document.getElementById("own2"),
					j = 0,
					tr_player = '',
					lvl = '';
				for(j=1;j<div_players.getElementsByTagName("tr").length;j++){
					tr_player = div_players.getElementsByTagName("tr")[j];
					QuemFight = '[ARENA] ['+tr_player.getElementsByTagName("td")[2].textContent.trim()+'] '+ tr_player.getElementsByTagName("td")[1].textContent.trim()+' '+tr_player.getElementsByTagName("td")[0].textContent.trim();
                    //QuemFightB = '['+tr_player.getElementsByTagName("td")[2].textContent.trim()+'] '+ tr_player.getElementsByTagName("td")[1].textContent.trim()+' '+tr_player.getElementsByTagName("td")[0].textContent.trim();
					if(ListaBranca.indexOf(QuemFight) != -1){
                        arenaAtaque = tr_player.getElementsByTagName("td")[0].textContent.trim();
                        GM_setValue(GladiatusFuncoes.get_server()+"fightNow",'['+tr_player.getElementsByTagName("td")[2].textContent.trim()+'] '+ tr_player.getElementsByTagName("td")[1].textContent.trim()+' '+tr_player.getElementsByTagName("td")[0].textContent.trim());
                        low_lvl_index = j;
                        //alert('Lista branca Arena: '+arenaAtaque);
					}else if(ArenaForte.indexOf(QuemFight) == -1){
						lvl = parseInt(tr_player.getElementsByTagName("td")[1].innerHTML);
						if(atArena.indexOf(tr_player.getElementsByTagName("td")[0].textContent.trim())!=-1){

						}else if(lvl < low_lvl){
							low_lvl = lvl;
							low_lvl_index = j;
							arenaAtaque = tr_player.getElementsByTagName("td")[0].textContent.trim();
							GM_setValue(GladiatusFuncoes.get_server()+"fightNow",'['+tr_player.getElementsByTagName("td")[2].textContent.trim()+'] '+ tr_player.getElementsByTagName("td")[1].textContent.trim()+' '+tr_player.getElementsByTagName("td")[0].textContent.trim());
						}
					}
				}
				//alert(arenaAtaque);
				if(low_lvl_index!= usglAuto){
				   document.getElementById("own2").getElementsByTagName("tr")[low_lvl_index].getElementsByTagName("div")[0].click();
						setTimeout(function(){GladiatusFuncoes.reserta_ataque(arenaAtaque,1);}, 5000);
				}else{
					document.getElementsByTagName("form")[0].getElementsByTagName("input")[0].click();
				}
			} else {
				setTimeout(function(){window.location.href=GladiatusFuncoes.get_base()+'mod=overview&sh='+id_sessao;}, 3000);
			}
		},
		auto_CT : function(){
			let ctAtaque='', QuemFight = '';
			if(window.location.href.indexOf("mod=arena&submod=serverArena&aType=3")!=-1){
				let low_lvl =200,
					low_lvl_index = usglAuto,
					div_players = document.getElementById("own3"),
					j = 0,
					tr_player = '',
					lvl = '';
				for(j=1;j<div_players.getElementsByTagName("tr").length;j++){
					tr_player = div_players.getElementsByTagName("tr")[j];
					QuemFight = '[CT] ['+tr_player.getElementsByTagName("td")[2].textContent.trim()+'] '+ tr_player.getElementsByTagName("td")[1].textContent.trim()+' '+tr_player.getElementsByTagName("td")[0].textContent.trim();
                    //QuemFightB = '['+tr_player.getElementsByTagName("td")[2].textContent.trim()+'] '+ tr_player.getElementsByTagName("td")[1].textContent.trim()+' '+tr_player.getElementsByTagName("td")[0].textContent.trim();
					if(ListaBranca.indexOf(QuemFight) != -1){
                        ctAtaque = tr_player.getElementsByTagName("td")[0].textContent.trim();
                        GM_setValue(GladiatusFuncoes.get_server()+"fightNow",'['+tr_player.getElementsByTagName("td")[2].textContent.trim()+'] '+ tr_player.getElementsByTagName("td")[1].textContent.trim()+' '+tr_player.getElementsByTagName("td")[0].textContent.trim());
                        low_lvl_index = j;
                        //alert('Lista branca CT: '+ctAtaque);
					}else if(ArenaForte.indexOf(QuemFight) == -1){
						lvl = parseInt(tr_player.getElementsByTagName("td")[1].innerHTML);
						if(atArena.indexOf(tr_player.getElementsByTagName("td")[0].textContent.trim())!=-1){
						}else if(lvl < low_lvl){
							low_lvl = lvl;
							low_lvl_index = j;
							ctAtaque = tr_player.getElementsByTagName("td")[0].textContent.trim();
							GM_setValue(GladiatusFuncoes.get_server()+"fightNow",'['+tr_player.getElementsByTagName("td")[2].textContent.trim()+'] '+ tr_player.getElementsByTagName("td")[1].textContent.trim()+' '+tr_player.getElementsByTagName("td")[0].textContent.trim());
						}
					}
				}
				//alert(ctAtaque);
				if(low_lvl_index!= usglAuto){
					document.getElementById("own3").getElementsByTagName("tr")[low_lvl_index].getElementsByTagName("div")[0].click();
					setTimeout(function(){GladiatusFuncoes.reserta_ataque(ctAtaque,2);}, 5000);
				}else{
					document.getElementsByTagName("form")[0].getElementsByTagName("input")[0].click();
				}
			} else {
				setTimeout(function(){window.location.href=GladiatusFuncoes.get_base()+'mod=overview&sh='+id_sessao;}, 3000);
			}
		},
		reserta_ataque : function(arenaAtaque,tipo){
			if(document.getElementById("bashtext").innerHTML.indexOf("Hoje já lutou 5 vezes contra")!=-1){
				if(GM_getValue(GladiatusFuncoes.get_server()+"lutaSemHonra")==0){
					atArena = atArena +'|'+arenaAtaque;//alert(atArena);
					if(tipo==1){
						GladiatusFuncoes.auto_arena();
					}else if(tipo==2){
						GladiatusFuncoes.auto_CT();
					}
                    GM_setValue(GladiatusFuncoes.get_server()+"ataqueSemHonra",0);
				}else{
                    GM_setValue(GladiatusFuncoes.get_server()+"ataqueSemHonra",1);
					$('#linkbod').click();
				}
			}
		},
		auto_Masmorra : function(){
			if(window.location.href.indexOf("mod=dungeon&loc=")!=-1){
				let target = $('#content>div>div>img[onclick]:eq(1)'),
					dngbutton = $('li.pngfix:eq(2)>a');
				if ($('form>table>tbody>tr>td:eq(1)>input.button1').length){
					if ($('form>table>tbody>tr>td:eq(1)>input.button1:not(".disabled")').length){
						document.getElementsByName("dif2").item(0).click();
					}else if ($('form>table>tbody>tr>td:eq(0)>input.button1').length){
						document.getElementsByName("dif1").item(0).click();
					}
				}else {
					let dungeonId = $("input[name='dungeonId']").val();
					$('div>div>map>area:eq(0)').trigger('click');
				}
				if(target.length){
					let exit = $("input[name='dungeonId']+input");
					setTimeout(function(){
						target.trigger('click');
						setTimeout(function(){GladiatusFuncoes.go_to("overview");}, 5000);
					}, 3000);
				}else if (dngbutton.length){
					alert('Nunca entrou aqui nem sei o que é...');
					setTimeout(function(){window.location.href=dngbutton.attr("href");}, 500);
				}
			} else {
				setTimeout(function(){window.location.href=GladiatusFuncoes.get_base()+'mod=overview&sh='+id_sessao;}, 3000);
			}
		},
		auto_Expedicao : function(){
			if(window.location.href.indexOf("mod=location&loc=")!=-1){
				let buttons = $(".expedition_button");
				if (buttons.length){
					let rubycheck = buttons.attr("onclick").match(/\d+/g);
					if(Number(rubycheck[2]) === 0){
						if (getExpOnOff>0){
							setTimeout(function(){
								buttons.eq(getExpOnOff-1).trigger('click');
							}, 500);
						}
					}
				}
                setTimeout(function(){window.location.href=GladiatusFuncoes.get_base()+'mod=overview&sh='+id_sessao;}, 10000);
			} else {
				setTimeout(function(){window.location.href=GladiatusFuncoes.get_base()+'mod=overview&sh='+id_sessao;}, 3000);
			}
		},
		auto_evento : function(){
			if(GM_getValue(GladiatusFuncoes.get_server()+"tempo_evento")<=0){
				if(window.location.href.indexOf("mod=location&submod=serverQuest&loc="+GM_getValue(GladiatusFuncoes.get_server()+"eventoEspecialNome"))!=-1){
					let buttons = $(".expedition_button");
					if (buttons.length){
						setTimeout(function(){
							GM_setValue(GladiatusFuncoes.get_server()+"tempo_evento",5000);
                            let btn_missoes = $(".expedition_button:not('.disabled')");
                            btn_missoes.eq(0).trigger('click');
						}, 1500);
					}else{
						setTimeout(function(){window.location.href=GladiatusFuncoes.get_base()+'mod=overview&sh='+id_sessao;}, 3000);
					}
				}else {
					setTimeout(function(){window.location.href=GladiatusFuncoes.get_base()+'mod=overview&sh='+id_sessao;}, 3000);
				}
			}else {
				setTimeout(function(){window.location.href=GladiatusFuncoes.get_base()+'mod=overview&sh='+id_sessao;}, 3000);
			}
		},
		validaArrayExpedicao : function(missao,txt_pesquisa){
			let arr = txt_pesquisa.split("||"),
				situacao = 'N',
				i = 0;
			for (i = 0; i < arr.length; i++) {
				if(missao.indexOf(arr[i]) != -1){
					situacao = 'S';
				}
			}
			return situacao;
		},
		auto_missao : function(){
			if(window.location.href.indexOf('mod=quests&sh=') != -1) {
				let gameid = $(".quest_slot_icon:first").attr("style").match(/\d+/),
					selector2 = '',
					selector3 = '';
				//arena
				if(GM_getValue(GladiatusFuncoes.get_server()+"arena_quest")==1){
					selector2='.contentboard_slot.contentboard_slot_inactive>.quest_slot_icon[style="background-image:url('+gameid+'/img/ui/quest/icon_arena_inactive.jpg)"]~.quest_slot_button.quest_slot_button_accept:first';
				}
				//CT
				if(GM_getValue(GladiatusFuncoes.get_server()+"ct_quest")==1){
					selector3='.contentboard_slot.contentboard_slot_inactive>.quest_slot_icon[style="background-image:url('+gameid+'/img/ui/quest/icon_grouparena_inactive.jpg)"]~.quest_slot_button.quest_slot_button_accept:first';
				}
				//Expedicao / Masmorra
				let AcheiDoFiltro = 'N',
					AcheiDoFiltroM = 'N';
				if(GM_getValue(GladiatusFuncoes.get_server()+"missoes_quest")==1){
					let txt_pesquisa_exp = document.getElementById("txt_filtro_Expe").value,
						txt_pesquisa_Mas = document.getElementById("txt_filtro_Masm").value,
						missaoDsc='',
						expHREF = '',
						MasHREF='';
					$('.contentboard_slot.contentboard_slot_inactive').each(function() {
						missaoDsc = $(this).find("div:eq(1)").text().trim();
						if(missaoDsc.indexOf(GM_getValue(GladiatusFuncoes.get_server()+"expedicaoQuem"))!=-1){
							if(AcheiDoFiltro=='N' && GladiatusFuncoes.validaArrayExpedicao(missaoDsc,txt_pesquisa_exp) == 'S'){
                                let quemExpedicao = $("#caixa_menu").val(GM_getValue(GladiatusFuncoes.get_server()+"expedicao_atual"));
                                expHREF = $(this).find("a[href]:first");
								AcheiDoFiltro = expHREF.attr("href");
							}
						}else if(AcheiDoFiltroM=='N' && GladiatusFuncoes.validaArrayExpedicao(missaoDsc,txt_pesquisa_Mas) == 'S'){
							MasHREF = $(this).find("a[href]:first");
							AcheiDoFiltroM = MasHREF.attr("href");//alert(missaoDsc);
						}
						//alert(missaoDsc + ' - '+ txt_pesquisa_exp + ' - Expedição '+ AcheiDoFiltro + ' Masmorra '+ AcheiDoFiltroM);
					});
				}
				let combiner='';
				if($(selector3).length){
					combiner=$(selector3);
				}else if($(selector2).length){
					combiner=$(selector2);
				}
				let done=$('.quest_slot_button.quest_slot_button_finish:first'),
					rr=$('.quest_slot_button.quest_slot_button_restart:first'),
					rld=$('.pngfix.current'),
					active=$(".contentboard_slot.contentboard_slot_active"),
					button_cancel=$(".quest_slot_button_cancel"),
					button=$("#quest_footer_reroll>.awesome-button:not('.disabled')");//alert(button_cancel.length);
				if(button_cancel.length < 5){
					if (done.length){
						//missão concluida
						GM_setValue(GladiatusFuncoes.get_server()+"nb_quest",GM_getValue(GladiatusFuncoes.get_server()+"nb_quest")+1);
						GM_setValue(GladiatusFuncoes.get_server()+"verificaMissao",1);
						window.location.href=$(done).attr("href");
					}else if (AcheiDoFiltro != 'N' && AcheiDoFiltro !== undefined){//Para expedição do filtro
						GM_setValue(GladiatusFuncoes.get_server()+"exp_quest",1);
						GM_setValue(GladiatusFuncoes.get_server()+"verificaMissao",1);
						window.location.href=AcheiDoFiltro;
					}else if (AcheiDoFiltroM != 'N' && AcheiDoFiltroM !== undefined){//Para masmorra do filtro
						GM_setValue(GladiatusFuncoes.get_server()+"verificaMissao",1);
						window.location.href=AcheiDoFiltroM;
					}else /**/if (combiner.length){//Arena e CT
                        //alert('Combinado');
						GM_setValue(GladiatusFuncoes.get_server()+"verificaMissao",1);
						window.location.href=$(combiner).attr("href");
					}else/**/ if (rr.length){
						GM_setValue(GladiatusFuncoes.get_server()+"verificaMissao",1);
						window.location.href=$(rr).attr("href");
					}else if (active.length<5 && button.length){//alert(active.length +' - '+button.length);
						//Para starta a missão
						GM_setValue(GladiatusFuncoes.get_server()+"verificaMissao",1);//Aqui fica para renovar as missoes
						window.location.href='index.php?mod=quests&submod=resetQuests&sh='+id_sessao;
					} else {
                        GM_setValue(GladiatusFuncoes.get_server()+"verificaMissao",0);
                        if(button_cancel.length == 5){
                            GM_setValue(GladiatusFuncoes.get_server()+"missoes_quest",0);//Desativa missões para pegar a proxima na lista
                            setTimeout(function(){window.location.href=window.location.href;}, GladiatusFuncoes.get_time_to_reload());
                            GladiatusFuncoes.exibirContador(GladiatusFuncoes.get_time_to_reload());
                            GM_setValue(GladiatusFuncoes.get_server()+"missoes_quest",1);//Reativa missões para entrar se for preciso
                        }else{
                            setTimeout(function(){GladiatusFuncoes.go_to("home");}, GladiatusFuncoes.get_time_to_reload() );
                        }
					}
					GladiatusFuncoes.exibirContador(GladiatusFuncoes.get_time_to_reload());
				}else{//alert(button_cancel.length);
					/*
					GM_setValue(GladiatusFuncoes.get_server()+"missoes_quest",0);//Desativa missões para pegar a proxima na lista
					 */
                    setTimeout(function(){window.location.href=window.location.href;}, GladiatusFuncoes.get_time_to_reload());
                    GM_setValue(GladiatusFuncoes.get_server()+"verificaMissao",0);
                    GM_setValue(GladiatusFuncoes.get_server()+"tempo_nova_missao",210000);
                    let valorR = GladiatusFuncoes.get_time_to_reload();
                    setTimeout(function(){window.location.href=window.location.href;}, valorR);
                    GladiatusFuncoes.exibirContador(valorR);
                    //GM_setValue(GladiatusFuncoes.get_server()+"missoes_quest",1);//Reativa missões para entrar se for preciso
				}
			} else {
				GM_setValue(GladiatusFuncoes.get_server()+"verificaMissao",0);
				setTimeout(function(){GladiatusFuncoes.go_to("overview");	}, 500 );
			}
		},
		go_to : function(dest){
            if(dest=='foret'){
                if(window.location.href.indexOf("mod=location&loc=0&sh=")<0){
                    window.location.href=GladiatusFuncoes.get_base()+'mod=location&loc=0&sh='+id_sessao;
                }
            }
            if(dest=='arene'){
                if(window.location.href.indexOf("mod=arena&submod=serverArena&aType=2&sh=")<0){
                    window.location.href=GladiatusFuncoes.get_base()+'mod=arena&submod=serverArena&aType=2&sh='+id_sessao;
                }
            }
            if(dest=='port'){
                if(window.location.href.indexOf("mod=location&loc=1&sh=")<0){
                    window.location.href=GladiatusFuncoes.get_base()+'mod=location&loc=1&sh='+id_sessao;
                }
            }
            if(dest=='monts'){
                if(window.location.href.indexOf("mod=location&loc=2&sh=")<0){
                    window.location.href=GladiatusFuncoes.get_base()+'mod=location&loc=2&sh='+id_sessao;
                }
            }
            let mLink = '',
                loc = '';
            if(dest=='expedicao'){
                loc = GM_getValue(GladiatusFuncoes.get_server()+"expedicao_atual");
                mLink = 'mod=location&loc='+loc+'&sh=';
                if(window.location.href.indexOf(mLink)<0){
                    window.location.href=GladiatusFuncoes.get_base()+mLink+id_sessao;
                }
            }
            if(dest=='masmorra'){
                loc = GM_getValue(GladiatusFuncoes.get_server()+"masmorra_atual");
                mLink = "mod=dungeon&loc="+loc+"&dungeon=1&sh=";

                if(window.location.href.indexOf(mLink)<0){
                    window.location.href=GladiatusFuncoes.get_base()+mLink+id_sessao;
                }
            }
            if(dest=='ciscusturma'){
                if(window.location.href.indexOf("?mod=arena&submod=serverArena&aType=3&sh=")<0){

                    window.location.href=GladiatusFuncoes.get_base()+'mod=arena&submod=serverArena&aType=3&sh='+id_sessao;
                }
            }
            if(dest=='missao'){
                if(window.location.href.indexOf("?mod=quests&sh=")<0){
                    window.location.href=GladiatusFuncoes.get_base()+'mod=quests&sh='+id_sessao;
                }
            }
            if(dest=='overview'){
                if(window.location.href.indexOf("?mod=overview&inv=0&doll=1&sh=")<0){
                    window.location.href=GladiatusFuncoes.get_base()+'mod=overview&inv=0&doll=1&sh='+id_sessao;
                }
            }
            if(dest=='overview2'){
                if(window.location.href.indexOf("mod=overview&inv=1&doll=1&sh=")<0){
                    window.location.href=GladiatusFuncoes.get_base()+'mod=overview&inv=1&doll=1&sh='+id_sessao;
                }
            }
            if(dest=='hide'){
                if(window.location.href.indexOf('mod=inventory&sub='+GM_getValue(GladiatusFuncoes.get_server()+"pacotes_atual")+'&subsub=2&sh=')<0){
                    window.location.href=GladiatusFuncoes.get_base()+'mod=inventory&sub='+GM_getValue(GladiatusFuncoes.get_server()+"pacotes_atual")+'&subsub=2&sh='+id_sessao;
                }
            }
            if(dest=='train'){
                if(window.location.href.indexOf("mod=training&sh=")<0){
                    window.location.href=GladiatusFuncoes.get_base()+'mod=training&sh='+id_sessao;
                }
            }
            if(dest=='home'){
                GM_setValue(GladiatusFuncoes.get_server()+"verificaMissao",0);
                window.location.href=GladiatusFuncoes.get_base()+'mod=overview&sub=0&subsub=setInv&inv=0&page=0&sh='+id_sessao;
            }
            if(dest=='evento'){
                if(window.location.href.indexOf('mod=location&submod=serverQuest&loc='+GM_getValue(GladiatusFuncoes.get_server()+"eventoEspecialNome")+'&sh=')<0){
                    window.location.href=GladiatusFuncoes.get_base()+'mod=location&submod=serverQuest&loc='+GM_getValue(GladiatusFuncoes.get_server()+"eventoEspecialNome")+'&sh='+id_sessao;
                }
            }
		},
        tocaSom : function(){
            //var mCoinSound = new Audio(hostExterno+"beep.mp3");
            //mCoinSound.play();
        },
        addZero : function(i) {
            if (i < 10) {
                i = "0" + i;
            }
            return i;
        },
        inativaSysAuto : function(){
            GM_setValue(GladiatusFuncoes.get_server()+"gladiatus_cipr_onoff", 'Sistema Inativo');
        },
        MensagemSystem : function(divMSG){
            if(GM_getValue(GladiatusFuncoes.get_server()+"desativaEmail")==1){
                $.ajax({
                    url: 'https://'+GladiatusFuncoes.get_server()+'.gladiatus.gameforge.com/game/index.php',
                    type: 'GET',
                    data: 'mod=messages&submod=messageShow&folder=0&sh='+id_sessao,
                    success: function(data){
                        if($(data).find('#content>form>div>div').length){
                            var msgs = '';
                            var message_box = $(data).find('#content>form>div>div'),
                                id='',
                                message_box_title='',
                                message_box_content='';
                            $(message_box).each(function(i){
                                id = $(this).attr("id");
                                if(id != undefined){
                                    if(i<=parseInt(divMSG)){
                                        message_box_title = GladiatusFuncoes.trim($(this).find('.messageSubject>.message_box_title>div>a').text());
                                        message_box_content = GladiatusFuncoes.trim($(this).find('.message_box_content>.message_text').text());
                                        if(msgs==''){
                                            msgs = ''+message_box_title+'---'+message_box_content;
                                        }else{
                                            msgs += '-----'+message_box_title+'---'+message_box_content;
                                        }

                                        let msgPack = message_box_content.split("===")[0];
                                        let msgPackValor = message_box_content.split("===")[1];
                                        if(msgPack=='PACK'){
                                            GM_setValue(GladiatusFuncoes.get_server()+"CriaBagValor",msgPackValor);
                                            //alert(msgPackValor);
                                        }
                                    }
                                }
                            });
                            if(msgs!=''){
                                GladiatusFuncoes.send_mailNotify(msgs);
                            }
                        }
                    }
                });
            }else{
                //Verifica se tem mensagem nova e avisa
                //GM_setValue(GladiatusFuncoes.get_server()+"totalMensagem",divMSG);
                /*
                if(GM_getValue(GladiatusFuncoes.get_server()+"desativaEmail")==0){
                    if(GM_getValue(GladiatusFuncoes.get_server()+"SomParaMSG")==1){
                        GladiatusFuncoes.tocaSom();
                    }
                }
                */
                $.ajax({
                    url: 'https://'+GladiatusFuncoes.get_server()+'.gladiatus.gameforge.com/game/index.php',
                    type: 'GET',
                    data: 'mod=messages&submod=messageShow&folder=0&sh='+id_sessao,
                    success: function(data){
                        if($(data).find('#content>form>div>div').length){
                            let msgs = '';
                            let message_box = $(data).find('#content>form>div>div'),
                                id='',
                                message_box_content='';
                            $(message_box).each(function(i){
                                id = $(this).attr("id");
                                if(id != undefined){
                                    if(i<=parseInt(divMSG)){
                                        message_box_content = GladiatusFuncoes.trim($(this).find('.message_box_content>.message_text').text());
                                        let msgPack = message_box_content.split("===")[0];
                                        let msgPackValor = message_box_content.split("===")[1];
                                        if(msgPack=='PACK'){
                                            GM_setValue(GladiatusFuncoes.get_server()+"CriaBagValor",msgPackValor);
                                            //alert(msgPackValor);
                                        }
                                    }
                                }
                            });
                        }
                    }
                });
            }
        },
        get_stats : function(){
            if(window.location.href.indexOf("submod=showCombatReport")!=-1){
			   let combat_Id = window.location.href.split("reportId=")[1].split("&")[0];
				if(!GM_getValue(GladiatusFuncoes.get_server()+"combat_"+combat_Id)){
					GM_setValue(GladiatusFuncoes.get_server()+"stat_combat",parseInt(GM_getValue(GladiatusFuncoes.get_server()+"stat_combat"))+1);
				}
				if(document.getElementById("reportHeader").getAttribute("class")=="reportWin"){
					if(!GM_getValue(GladiatusFuncoes.get_server()+"combat_"+combat_Id)){
						GM_setValue(GladiatusFuncoes.get_server()+"combat_"+combat_Id,combat_Id);
						if(document.getElementById("reportHeader").getAttribute("class")=="reportWin"){
                            let OuroWIN = 0;
							//batalhas no CT
							GM_setValue(GladiatusFuncoes.get_server()+"stat_victoire",parseInt(GM_getValue(GladiatusFuncoes.get_server()+"stat_victoire"))+1);
							if(window.location.href.indexOf("t=0")!=-1){
								//expedição
								GM_setValue(GladiatusFuncoes.get_server()+"contador_Exp",GM_getValue(GladiatusFuncoes.get_server()+"contador_Exp")+1);
							} else if(window.location.href.indexOf("t=1")!=-1){
								//Masmorra
								GM_setValue(GladiatusFuncoes.get_server()+"contador_Mas",GM_getValue(GladiatusFuncoes.get_server()+"contador_Mas")+1);
							} else if(window.location.href.indexOf("t=2")!=-1){
								//arena
								GM_setValue(GladiatusFuncoes.get_server()+"contador_arena",GM_getValue(GladiatusFuncoes.get_server()+"contador_arena")+1);
                                //Salva o jogador na lista branca se for Rentavel
                                OuroWIN = parseInt($("#content>div:eq(1)>section>table>tbody>tr>td>p:eq(0)").text().split("invadiu:")[1].split("Bônus por vitória")[0].replace(".",""),10);//alert(OuroWIN);
                                if(GM_getValue(GladiatusFuncoes.get_server()+"fightNow")!='' && OuroWIN>=MinListaBranca){
                                    if(ListaBranca.indexOf(GM_getValue(GladiatusFuncoes.get_server()+"fightNow"))==-1){
                                        ListaBranca[ListaBranca.length] = '[ARENA] '+GM_getValue(GladiatusFuncoes.get_server()+"fightNow");
                                        GM_setValue(GladiatusFuncoes.get_server()+"ListaBranca",JSON.stringify(ListaBranca));
                                        GM_setValue(GladiatusFuncoes.get_server()+"fightNow",'');
                                        //alert(JSON.stringify(ListaBranca));
                                    }
                                }
							}else if(window.location.href.indexOf("t=3")!=-1){
								//CT
								GM_setValue(GladiatusFuncoes.get_server()+"contador_CT",GM_getValue(GladiatusFuncoes.get_server()+"contador_CT")+1);
                                OuroWIN = parseInt($("#content>div:eq(1)>section>table>tbody>tr>td>p:eq(0)").text().split("invadiu:")[1].split("Bônus por vitória")[0].replace(".",""),10);//alert(OuroWIN);
                                if(GM_getValue(GladiatusFuncoes.get_server()+"fightNow")!='' && OuroWIN>=MinListaBranca){
                                    if(ListaBranca.indexOf(GM_getValue(GladiatusFuncoes.get_server()+"fightNow"))==-1){
                                        ListaBranca[ListaBranca.length] = '[CT] '+GM_getValue(GladiatusFuncoes.get_server()+"fightNow");
                                        GM_setValue(GladiatusFuncoes.get_server()+"ListaBranca",JSON.stringify(ListaBranca));
                                        GM_setValue(GladiatusFuncoes.get_server()+"fightNow",'');
                                        //alert(JSON.stringify(ListaBranca));
                                    }
                                }
							}
						}
					}else{
						//	alert(GladiatusFuncoes.get_server()+"combat_"+combat_Id);
					}
					document.getElementById('eventoVitorias').innerHTML += 'VENCEDOR: '+usglAuto+"<br>";
				}else{
					//alert(reportLose);
					if(GM_getValue(GladiatusFuncoes.get_server()+"fightNow")!=''){
						if(!GM_getValue(GladiatusFuncoes.get_server()+"combat_"+combat_Id)){
							GM_setValue(GladiatusFuncoes.get_server()+"combat_"+combat_Id,combat_Id);
							if(window.location.href.indexOf("t=0")!=-1){
								//expedição
								GM_setValue(GladiatusFuncoes.get_server()+"contador_Exp",GM_getValue(GladiatusFuncoes.get_server()+"contador_Exp")+1);
							} else if(window.location.href.indexOf("t=1")!=-1){
								//Masmorra
								GM_setValue(GladiatusFuncoes.get_server()+"contador_MasM",GM_getValue(GladiatusFuncoes.get_server()+"contador_MasM")+1);
								//Desativa a masmorra, deve esta em um chefao..
								GM_setValue(GladiatusFuncoes.get_server()+"mas_quest",0);
							}else if(window.location.href.indexOf("t=2")!=-1){
								//arena
								GM_setValue(GladiatusFuncoes.get_server()+"contador_arenaM",GM_getValue(GladiatusFuncoes.get_server()+"contador_arenaM")+1);

								//Salva o jogador que venceu
								if(ArenaForte.indexOf('[ARENA] '+GM_getValue(GladiatusFuncoes.get_server()+"fightNow"))==-1){
									if('[ARENA] '+GM_getValue(GladiatusFuncoes.get_server()+"fightNow")!= usglAuto && GM_getValue(GladiatusFuncoes.get_server()+"ataqueSemHonra") == 0){
										ArenaForte[ArenaForte.length] = '[ARENA] '+GM_getValue(GladiatusFuncoes.get_server()+"fightNow");
										GM_setValue(GladiatusFuncoes.get_server()+"ArenaForte",JSON.stringify(ArenaForte));
										GM_setValue(GladiatusFuncoes.get_server()+"fightNow",'');
										//alert(JSON.stringify(ArenaForte));
									}
                                    GM_setValue(GladiatusFuncoes.get_server()+"ataqueSemHonra",0);
								}
							}else if(window.location.href.indexOf("t=3")!=-1){
								//CT
								GM_setValue(GladiatusFuncoes.get_server()+"contador_CTM",GM_getValue(GladiatusFuncoes.get_server()+"contador_CTM")+1);
								//Salva o jogador que venceu
								if(ArenaForte.indexOf('[CT] '+GM_getValue(GladiatusFuncoes.get_server()+"fightNow"))==-1){
									if('[CT] '+GM_getValue(GladiatusFuncoes.get_server()+"fightNow")!= usglAuto && GM_getValue(GladiatusFuncoes.get_server()+"ataqueSemHonra") == 0){
										ArenaForte[ArenaForte.length] = '[CT] '+GM_getValue(GladiatusFuncoes.get_server()+"fightNow");
										GM_setValue(GladiatusFuncoes.get_server()+"ArenaForte",JSON.stringify(ArenaForte));
										GM_setValue(GladiatusFuncoes.get_server()+"fightNow",'');
										//alert(JSON.stringify(ArenaForte));
									}
                                    GM_setValue(GladiatusFuncoes.get_server()+"ataqueSemHonra",0);
								}
							}
							if(GM_getValue(GladiatusFuncoes.get_server()+"missoes_quest")==1){
								//Joga para as missoes pois acabou de perder, assim já as renova.
								GM_setValue(GladiatusFuncoes.get_server()+"verificaMissao",1);
								GM_setValue(GladiatusFuncoes.get_server()+"missoes_quest",1);
								GM_setValue(GladiatusFuncoes.get_server()+"tempo_nova_missao",100);
							}
						}
					}
					document.getElementById('eventoVitorias').innerHTML += 'VENCEDOR: '+GM_getValue(GladiatusFuncoes.get_server()+"fightNow")+"<br>";
				}
			}
        },
        get_places_shop : function(){
            var items = $("#shop").find("div");
            var first_item=[];
            var i=0,
                id='',
                tooltip;
            items.each(function(){
                if(!$(this).find("img").length){
                    id = $(this).attr("id");
                    tooltip = $("#tOoLtIp_"+id).text();
                    if (tooltip){
                        first_item[i]=id;
                        i++;
                    }
                }
            });
            return first_item;
        },
        get_valeur : function(id){
            var texte = $("div[data-item-id='"+id+"']");
            texte = texte.attr("data-price-gold");

            if(texte){
                return texte;
            }else{
                return 0;
            }
        },
        check_shop : function(){
            GM_setValue(GladiatusFuncoes.get_server()+"big_item",'');
            GM_setValue(GladiatusFuncoes.get_server()+"low_item",'');
            GM_setValue(GladiatusFuncoes.get_server()+"low_item_big",'');
            GM_setValue(GladiatusFuncoes.get_server()+"low_item_medium",'');
            let total_shop=0,
                items = $("#shop").find("div"),
                big_item ="",
                low_item="",
                low_item_big="",
                low_item_medium="",
                valeur_item_medium=GM_getValue(GladiatusFuncoes.get_server()+"gold_limit_medium"),
                valeur_item_big=10000000,
                low_prix=4000000,
                big_prix=0,i=0,
                id='',
                tooltip='',
                valeur_item ='';

            items.each(function(){
                if(!$(this).find("img").length){
                    id = $(this).attr("id");
                    tooltip = $("#tOoLtIp_"+id).text();
                    if (tooltip){
                        GladiatusFuncoes.first_item[i]=id;
                        i++;
                    }
                }
            });
            items.each(function(){
                id = $(this).attr("id");
                valeur_item = $(this).attr("data-price-gold");
                total_shop = parseInt(total_shop)+parseInt(valeur_item);
                if(valeur_item<low_prix){
                    low_item=id;
                    low_prix=valeur_item;
                }
                if(valeur_item>GM_getValue(GladiatusFuncoes.get_server()+"gold_limit_medium") && valeur_item<valeur_item_big){
                    low_item_big=id;
                    valeur_item_big=valeur_item;
                }
                if(valeur_item<GM_getValue(GladiatusFuncoes.get_server()+"gold_limit_medium") && valeur_item>GM_getValue(GladiatusFuncoes.get_server()+"gold_limit_low") & valeur_item_medium>valeur_item){
                    low_item_medium=id;
                    valeur_item_medium=valeur_item;
                }
                if(valeur_item>big_prix){
                    big_item=id;
                    big_prix=valeur_item;
                }
            });
            GM_setValue(GladiatusFuncoes.get_server()+"total_shop",total_shop);
            GM_setValue(GladiatusFuncoes.get_server()+"big_item",big_item);
            GM_setValue(GladiatusFuncoes.get_server()+"low_item",low_item);
            GM_setValue(GladiatusFuncoes.get_server()+"low_item_big",low_item_big);
            GM_setValue(GladiatusFuncoes.get_server()+"low_item_medium",low_item_medium);
        },

        get_first_item : function(my_gold){
            let items = $("#shop").find("div"),
                first_item="",
                id='',
                valeur_item='',
                this_dif='',
                dif=10000000;
            items.each(function(){
                if($(this).attr("data-price-gold") > 0){
                    id = $(this).attr("data-item-id");
                    valeur_item = $(this).attr("data-price-gold");
                    this_dif = my_gold-valeur_item;
                    if(this_dif< dif && this_dif>=0){
                        dif=this_dif;
                        first_item=id;
                    }
                }
            });
            return first_item;
        },

        show_cachette_mess : function(){
            let i=0,this_i=0;
            for(i=0;i<document.getElementsByTagName("div").length;i++){
                if(document.getElementsByTagName("div")[i].getAttribute("style")){
                    if(document.getElementsByTagName("div")[i].getAttribute("style").indexOf("shop_avatar_1_4.png")!=-1 | document.getElementsByTagName("div")[i].getAttribute("style").indexOf("shop_avatar_0_4.png")!=-1 | document.getElementsByTagName("div")[i].getAttribute("style").indexOf("shop_avatar_2_1.png")!=-1){
                        this_i =i;
                    }
                }
            }
        },
        sell : function(ID_old,ID_new){
            var t = new Date(), a = t.getTime();
            $.ajax({
                url: "/game/ajax/inventoryswap.php?old="+ID_old+"&new="+ID_new+"&doll=1&shopPage=322&a="+a+"&sh="+id_sessao,
                type: 'get',
                dataType: 'html',
                /*async: false, */
                success: function(data) {}
            });
            setTimeout(function(){window.location.href=window.location.href;}, 5000 );
            GladiatusFuncoes.exibirContador(5000);
        },
        auto_hide : function(){
            GladiatusFuncoes.show_cachette_mess();
            let tab_places = GladiatusFuncoes.get_places_shop(),
                tab_item = GladiatusFuncoes.check_inv(),
                id_old=0,
                id_new=0;
            GladiatusFuncoes.check_shop();
            let my_gold = document.getElementById("sstat_gold_val").innerHTML.replace(/\./g, "").toInt(); //parseInt(document.getElementById("sstat_gold_val").innerHTML.replace(".",""));

            if(GM_getValue(GladiatusFuncoes.get_server()+"vente_en_cours")==0){
                let id_old=GladiatusFuncoes.get_first_item(my_gold),
                    id_new=0,
                    value = GladiatusFuncoes.get_valeur(id_old);
                if(my_gold>=parseInt(value) && id_old!=0){
                    GM_setValue(GladiatusFuncoes.get_server()+"gold_limit_value",value);
                    GladiatusFuncoes.buy(id_old);
                }else{
                    if(GM_getValue(GladiatusFuncoes.get_server()+"desativaSemOuroMercado")==1){
                        $('#onoffCT').click();
                        setTimeout(function(){GladiatusFuncoes.go_to("home");}, 5000);
                    }else{
                        if(GM_getValue(GladiatusFuncoes.get_server()+"desativaEmail")==0){
                            GladiatusFuncoes.tocaSom();
                        }else{
                            GladiatusFuncoes.send_mailNotify('Iventário vazio---Ficamos sem ouro no iventário, providência mais...');
                        }
                        GM_setValue(GladiatusFuncoes.get_server()+"BotLeilaoLance",1);
                        GM_setValue(GladiatusFuncoes.get_server()+"gold_limit_value",'999999999');
                    }
                }
                setTimeout(function(){window.location.href=window.location.href;}, 10000 );
                GladiatusFuncoes.exibirContador(10000);
            }else if(GM_getValue(GladiatusFuncoes.get_server()+"vente_en_cours")==1){
                alert('venda 1');		//vente medium
                if(!GM_getValue(GladiatusFuncoes.get_server()+"total_medium")==0){
                    id_old=GM_getValue(GladiatusFuncoes.get_server()+"medium_item_inv");
                    id_new=GladiatusFuncoes.get_first_place_shop();

                    GladiatusFuncoes.sell(id_old,id_new);
                }else{
                    GM_setValue(GladiatusFuncoes.get_server()+"vente_en_cours",0);
                    setTimeout(function(){window.location.reload();}, 3000 );
                    GladiatusFuncoes.exibirContador(3000);
                }
            }else if(GM_getValue(GladiatusFuncoes.get_server()+"vente_en_cours")==2){
                alert('venda 2');			//vente medium + petit
                id_old=0;
                id_new=0;
                if(GM_getValue(GladiatusFuncoes.get_server()+"medium_item_inv")==""){
                    if(!GM_getValue(GladiatusFuncoes.get_server()+"low_low_item_inv")){
                        GM_setValue(GladiatusFuncoes.get_server()+"vente_en_cours",0);
                    }else{
                        id_old= GM_getValue(GladiatusFuncoes.get_server()+"low_item_inv");
                    }
                }else{
                    id_old= GM_getValue(GladiatusFuncoes.get_server()+"medium_item_inv");
                }
                //Voltando valor para o 0 */
                GM_setValue(GladiatusFuncoes.get_server()+"vente_en_cours",0);
            }else if(GM_getValue(GladiatusFuncoes.get_server()+"vente_en_cours")==3){
                alert('venda 3');
                if(GM_getValue(GladiatusFuncoes.get_server()+"low_low_item_inv")!=""){
                    id_old= GM_getValue(GladiatusFuncoes.get_server()+"low_low_item_inv");
                    id_new = GladiatusFuncoes.get_first_place_shop();
                    GladiatusFuncoes.sell(id_old,id_new);
                }else{
                    GM_setValue(GladiatusFuncoes.get_server()+"vente_en_cours",0);
                }
            }else{alert('venda final');}
        },
        buy : function(ID_old){
            let atualiza = 0;
            $(".awesome-tabs.current[data-bag-number]").each(function(){
                if($(this).attr('data-bag-number')==parseInt(GM_getValue(GladiatusFuncoes.get_server()+"iventario_atual"))){
                    atualiza = 1;
                }
            });
            if(atualiza==1){
                setTimeout(function(){window.location.href=window.location.href;}, 10000 );
                GladiatusFuncoes.exibirContador(10000);
                let t = new Date(), a = t.getTime(),
                    fromX = $("#shop>div[data-item-id='"+ID_old+"']").attr("data-position-x"),
                    fromY = $("#shop>div[data-item-id='"+ID_old+"']").attr("data-position-y"),
                    toX = 0,
                    toY = 0,
                    i=0,
                    j=0;
                for(i=1; i<=8; i++){
                    for(j=1;j<=5; j++){
                        if(!$("#inv>div[data-position-x='"+i+"'][data-position-y='"+j+"']").length){
                            if(toX==0){
                                toX = i;
                                toY = j;
                            }
                        }
                    }
                }

                //alert(toX);
                if(toX==0){//alert('BotLeilaoLance');
                    //iventarioNovo = parseInt(GM_getValue(GladiatusFuncoes.get_server()+"iventario_atual")) + 1;
                    //GM_setValue(GladiatusFuncoes.get_server()+"iventario_atual",iventarioNovo);
                    if(GM_getValue(GladiatusFuncoes.get_server()+"desativaSemOuroMercado")==1){
                        $('#onoffCT').click();
                        setTimeout(function(){GladiatusFuncoes.go_to("home");}, 5000);
                    }
                    GM_setValue(GladiatusFuncoes.get_server()+"BotLeilaoLance",1);
                    GM_setValue(GladiatusFuncoes.get_server()+"gold_limit_value",'999999999');
                    setTimeout(function(){window.location.href=window.location.href;}, 3000 );
                    GladiatusFuncoes.exibirContador(3000);
                }else{
                    let idFrom = $("#shop").attr("data-container-number"),
                        idTo = $("#inv>div").attr("data-container-number"),
                        doll = 1;
                    $.ajax({
                        url: "https://"+GladiatusFuncoes.get_server()+".gladiatus.gameforge.com/game/ajax.php?mod=inventory&submod=move",
                        type: 'POST',
                        data: 'from='+idFrom+'&fromX='+fromX+'&fromY='+fromY+'&to='+idTo+'&toX='+toX+'&toY='+toY+'&amount=1&doll='+doll+'&a='+a+'&sh='+id_sessao,
                        /*async: false,*/
                        success: function(data) {
                            window.location.href=window.location.href;
                        }
                    });
                    GM_setValue(GladiatusFuncoes.get_server()+"vente_en_cours",0);
                    setTimeout(function(){window.location.href=window.location.href;}, 10000 );
                    GladiatusFuncoes.exibirContador(10000);
                }
            }else{
                setTimeout(function(){window.location.href=window.location.href;}, 10000 );
                GladiatusFuncoes.exibirContador(10000);
                let inv = 0;
                switch(parseInt(GM_getValue(GladiatusFuncoes.get_server()+"iventario_atual"))){
                    case 512 : inv = 0; break;
                    case 513 : inv = 1; break;
                    case 514 : inv = 2; break;
                    case 515 : inv = 3; break;
                    case 516 : inv = 4; break;
                    case 517 : inv = 5; break;
                    case 518 : inv = 6; break;
                    case 519 : inv = 7; break;
                }
                $.ajax({
                    url: "https://"+GladiatusFuncoes.get_server()+".gladiatus.gameforge.com/game/ajax.php?mod=inventory&submod=setInv&inv="+inv+"&sh="+id_sessao,
                    type: 'GET',
                    data: 'inv='+inv,
                    //async: false,
                    success: function(data) {
                        window.location.href=window.location.href;
                    }
                });
            }
        },
        ChefesExpedicao : function(){
            let buttons = $(".expedition_button");
            $("#blackoutDialogbuyBonus").before("<div style='background-color: #deb887;border: 3px solid #daa520;padding: 8px;'>"+
                                                "<select id='controler' ><option value='0'>OFF</option>" +
                                                "</select>"+
                                                "</div>");

            let ctrl = $("#controler");

            $.each(buttons,function(i){
                ctrl.append("<option value='"+(i+1)+"'>"+$(".expedition_name").eq(i).text()+"</option>");
            });

            if (!getExpOnOff || buttons.length < getExpOnOff){
                GM_setValue(GladiatusFuncoes.get_server()+"gladiatus_exp_onoff",buttons.length);
            }else {
                ctrl[0].options[getExpOnOff].selected = true;
            }

            $(ctrl).change(function(){
                let i = this.value;
                GM_setValue(GladiatusFuncoes.get_server()+"gladiatus_exp_onoff",i);
                window.location.reload();
            });
        },
        makeSingleColumnRow : function(row){
            let text = row[0],
                color = row[1],
                width = row[2] || 0,
                cell = $('<p>');
            cell.attr('style', 'color:' + color).html(text);
            // Set width or embed in wrapping div
            if (width > 0) {
                cell.css('max-width', width + 'px');
            }
            return cell;
        },
        getGealingItems : function(){
            let tooltip = '',
                row='',
                texts='';
            $("#inv>div[data-tooltip]").each(function(i){
                tooltip = $(this).data('tooltip');
                row = tooltip[0];
                // Decide if multi-columns vs. single-column
                if (row[0] instanceof Array && row[1] instanceof Array) {
                    texts = row[1];
                    if(texts[0].indexOf("Usar: Cura")!=-1){
                        //cura = texts[0].split("Usar: Cura ")[1].split(" ")[0];
                        db.push($(this).attr("data-item-id"));
                    }else{
                        texts = row[2];
                        if(texts[0].indexOf("Usar: Cura")!=-1){
                            //cura = texts[0].split("Usar: Cura ")[1].split(" ")[0];
                            db.push($(this).attr("data-item-id"));
                        }
                    }
                    //alert(cura);
                } else if (row[0] != '') {
                    alert('Entrou onde nao foi feito, fazer por favor');
                    let cells = GladiatusFuncoes.makeSingleColumnRow(row);
                }
            });
        },
        completaZeros : function(campo) {
            campo = "000" + campo;
            let campoFormatado = campo.substring(campo.length - 3, campo.length);
            return campoFormatado;
        },
        exibirContador : function(intSeg) {
            let valorRW = intSeg - 1000,
                ss = parseInt(valorRW / 1000),
                mm = parseInt(ss / 60),
                hh = parseInt(mm / 60),
                dd = parseInt(hh / 24);
            ss = ss - (mm * 60);
            mm = mm - (hh * 60);
            hh = hh - (dd * 24);

            let faltam = '';
            faltam += (dd && dd > 1) ? dd+' dias, ' : (dd==1 ? '1 dia, ' : '');
            faltam += (toString(hh).length) ? (hh<10 ? '0'+hh+':' : hh+':') : '';
            faltam += (toString(mm).length) ? (mm<10 ? '0'+mm+':' : mm+':') : '';
            faltam += (ss<10 ? '0'+ss : ss);
            document.getElementById('tempo').innerHTML = 'Verificação em ' + faltam;

            if (dd+hh+mm+ss > 0) {setTimeout( function(){GladiatusFuncoes.exibirContador(valorRW); }, 1000); }
        },
        trim : function(str) {
            return str.replace(/^\s+|\s+$/g,"");
        },
        rand : function(vMin,vMax) {
            let result = Math.floor(Math.random() * (vMax+1));
            if(result < vMin){
                return GladiatusFuncoes.rand(vMin,vMax);
            } else if(result > vMax){
                return GladiatusFuncoes.rand(vMin,vMax);
            }else {
                return result;
            }
        },
        sonequinha : function(){
            let dataAtual = new Date(),
                ano = dataAtual.getFullYear(),
                mes = GladiatusFuncoes.addZero(dataAtual.getMonth()),
                dia = GladiatusFuncoes.addZero(dataAtual.getDate()),
                timeDefinido1 = new Date(ano,mes,dia,GM_getValue(GladiatusFuncoes.get_server()+"max_Hora").split(":")[0],GM_getValue(GladiatusFuncoes.get_server()+"max_Hora").split(":")[1]),
                timeDefinido2 = new Date(ano,mes,dia,GM_getValue(GladiatusFuncoes.get_server()+"min_Hora").split(":")[0],GM_getValue(GladiatusFuncoes.get_server()+"min_Hora").split(":")[1]),
                timeSoneca = GladiatusFuncoes.rand(GM_getValue(GladiatusFuncoes.get_server()+"tempoMin"),GM_getValue(GladiatusFuncoes.get_server()+"tempoMax"));

            if (dataAtual.toLocaleTimeString() <= timeDefinido1.toLocaleTimeString() && dataAtual.toLocaleTimeString() >= timeDefinido2.toLocaleTimeString()){
                GladiatusFuncoes.exibirContador(timeSoneca);
                setTimeout(function(){window.location.href=window.location.href;}, timeSoneca);
            }else{
                GladiatusFuncoes.exibirContador(timeSoneca);
                setTimeout(function(){GladiatusFuncoes.sonequinha();}, timeSoneca);
            }
        },
        sysInativo : function(){
            let timeInativo = GladiatusFuncoes.rand(GM_getValue(GladiatusFuncoes.get_server()+"tempoMin"),GM_getValue(GladiatusFuncoes.get_server()+"tempoMax"));
            if (GM_getValue(GladiatusFuncoes.get_server()+"gladiatus_cipr_onoff") == 'Sistema Ativo'){
                GladiatusFuncoes.exibirContador(timeInativo);
                setTimeout(function(){window.location.reload();}, timeInativo);
            } else {
                GladiatusFuncoes.exibirContador(timeInativo);
                setTimeout(function(){GladiatusFuncoes.sysInativo();}, timeInativo);
            }
        },
        contadorMissoes : function(intSeg) {
            let valorRW = intSeg - 1000;
            GM_setValue(GladiatusFuncoes.get_server()+"tempo_nova_missao",valorRW);
            let ss = parseInt(valorRW / 1000),
                mm = parseInt(ss / 60),
                hh = parseInt(mm / 60),
                dd = parseInt(hh / 24);
            ss = ss - (mm * 60);
            mm = mm - (hh * 60);
            hh = hh - (dd * 24);
            let faltam = '';
            faltam += (dd && dd > 1) ? dd+' dias, ' : (dd==1 ? '1 dia, ' : '');
            faltam += (toString(hh).length) ? (hh<10 ? '0'+hh+':' : hh+':') : '';
            faltam += (toString(mm).length) ? (mm<10 ? '0'+mm+':' : mm+':') : '';
            faltam += (ss<10 ? '0'+ss : ss);
            document.getElementById('tempo_missoes').innerHTML = ' ' + faltam;
            if (dd+hh+mm+ss > 0) {setTimeout( function(){ GladiatusFuncoes.contadorMissoes(valorRW); }, 1000); }
        },
        setMissoes : function(){
            let res = GM_getValue(GladiatusFuncoes.get_server()+"tempo_nova_missao");
            if(res>0){
                GladiatusFuncoes.contadorMissoes(res);
            }else{
                GM_setValue(GladiatusFuncoes.get_server()+"tempo_nova_missao",0);
            }
        },
        contadorEvento : function(intSeg) {
            let valorRW = intSeg - 1000;
            GM_setValue(GladiatusFuncoes.get_server()+"tempo_evento",valorRW);
            let ss = parseInt(valorRW / 1000),
                mm = parseInt(ss / 60),
                hh = parseInt(mm / 60),
                dd = parseInt(hh / 24);
            ss = ss - (mm * 60);
            mm = mm - (hh * 60);
            hh = hh - (dd * 24);
            let faltam = '';
            faltam += (dd && dd > 1) ? dd+' dias, ' : (dd==1 ? '1 dia, ' : '');
            faltam += (toString(hh).length) ? (hh<10 ? '0'+hh+':' : hh+':') : '';
            faltam += (toString(mm).length) ? (mm<10 ? '0'+mm+':' : mm+':') : '';
            faltam += (ss<10 ? '0'+ss : ss);
            $("#tempo_evento").text(' ' + faltam);
            //document.getElementById('tempo_evento').innerHTML = ' ' + faltam;
            if (dd+hh+mm+ss > 0) {setTimeout( function(){ GladiatusFuncoes.contadorEvento(valorRW); }, 1000); }
        },
        setEventoTempo : function(){
            let res = GM_getValue(GladiatusFuncoes.get_server()+"tempo_evento");
            if(res>0){
                GladiatusFuncoes.contadorEvento(res);
            }else{
                GM_setValue(GladiatusFuncoes.get_server()+"tempo_evento",0);
            }
        },
        cronomentro : function(intSeg, quem) {
            let valorRW = intSeg - 1000,
                ss = parseInt(valorRW / 1000),
                mm = parseInt(ss / 60),
                hh = parseInt(mm / 60),
                dd = parseInt(hh / 24);
            ss = ss - (mm * 60);
            mm = mm - (hh * 60);
            hh = hh - (dd * 24);
            let faltam = '';
            faltam += (dd && dd > 1) ? dd+' dias, ' : (dd==1 ? '1 dia, ' : '');
            faltam += (toString(hh).length) ? (hh<10 ? '0'+hh+':' : hh+':') : '';
            faltam += (toString(mm).length) ? (mm<10 ? '0'+mm+':' : mm+':') : '';
            faltam += (ss<10 ? '0'+ss : ss);

            document.getElementById(quem).innerHTML = 'Verificação em ' + faltam;
            if (dd+hh+mm+ss > 0) {setTimeout( function(){ GladiatusFuncoes.cronomentro(valorRW, quem); }, 1000); }
        },
        get_horloge_attaque : function(time){
            time = time/1000;
            let min = parseInt(time/60),
                sec = parseInt(time-(min*60));
            if(min<10){
                min = "0"+min;
            }
            if(sec<10){
                sec="0"+sec;
            }
            return "<span id='hrs_attaque'>0</span>:<span id='min_attaque'>"+min+"</span>:<span id='sec_attaque'>"+sec+"</span>";
        },
        moeda : function(valor, casas, separdor_decimal, separador_milhar){
            let valor_total = parseInt(valor * (Math.pow(10,casas))),
                inteiros = parseInt(parseInt(valor * (Math.pow(10,casas))) / parseFloat(Math.pow(10,casas))),
                centavos = parseInt(parseInt(valor * (Math.pow(10,casas))) % parseFloat(Math.pow(10,casas)));
            if(centavos%10 == 0 && centavos+"".length<2 ){
                centavos = centavos+"0";
            }else if(centavos<10){
                centavos = "0"+centavos;
            }
            let milhares = parseInt(inteiros/1000);
            inteiros = inteiros % 1000;
            let retorno = "";
            if(milhares>0){
                retorno = milhares+""+separador_milhar+""+retorno;
                if(inteiros == 0){
                    inteiros = "000";
                } else if(inteiros < 10){
                    inteiros = "00"+inteiros;
                } else if(inteiros < 100){
                    inteiros = "0"+inteiros;
                }
            }
            retorno += inteiros+""+separdor_decimal+""+centavos;
            return retorno;
        },
        get_inv_position : function(){
            let inv_position=0;
            if(window.location.toString().indexOf("inv=")!=-1){
                inv_position = window.location.toString().split("inv=")[1].split("&")[0];
            }
            return inv_position;
        },
        check_inv : function(){
            GM_setValue(GladiatusFuncoes.get_server()+"big_item_inv",'');
            GM_setValue(GladiatusFuncoes.get_server()+"low_item_inv",'');
            let total_shop=0,
                items = $("#inv").find("div"),
                tab_item=[];
            tab_item["low"]=new Array();
            tab_item["medium"]=new Array();
            let inc_tab_low=0,
                inc_tab_medium=0,
                big_item ="",
                low_item="",
                low_prix=4000000,
                big_prix=0,
                low_low_item="",
                valeur_medium_item=GM_getValue(GladiatusFuncoes.get_server()+"gold_limit_medium"),
                valeur_low_item=GM_getValue(GladiatusFuncoes.get_server()+"gold_limit_low"),
                medium_item="",
                total_low=0,
                total_medium=0,
                id='',
                valeur_item='';

            items.each(function(){
                if($(this).find("img").length){
                    id = $(this).attr("id");
                    valeur_item = parseInt(GladiatusFuncoes.get_valeur_inv(id));
                    total_shop = parseInt(total_shop)+parseInt(valeur_item);
                    if(valeur_item<GM_getValue(GladiatusFuncoes.get_server()+"gold_limit_low")){
                        total_low = parseInt(total_low)+parseInt(valeur_item);
                        tab_item["low"][inc_tab_low]=id;
                        inc_tab_low++;
                    }
                    if(valeur_item>GM_getValue(GladiatusFuncoes.get_server()+"gold_limit_low") && valeur_item<GM_getValue(GladiatusFuncoes.get_server()+"gold_limit_medium")){
                        total_medium = parseInt(valeur_item);

                        tab_item["medium"][inc_tab_medium]=id;
                        inc_tab_medium++;
                    }
                    if(valeur_item>GM_getValue(GladiatusFuncoes.get_server()+"gold_limit_low") && valeur_item<GM_getValue(GladiatusFuncoes.get_server()+"gold_limit_medium") && valeur_item<valeur_medium_item){
                        medium_item=id;
                        valeur_medium_item=valeur_item;
                    }
                    if(valeur_item<GM_getValue(GladiatusFuncoes.get_server()+"gold_limit_low") && valeur_item<valeur_low_item){
                        low_low_item=id;
                        valeur_low_item=valeur_item;
                    }
                    if(valeur_item<low_prix){
                        low_item=id;
                        low_prix=valeur_item;
                    }
                    if(valeur_item>big_prix){
                        big_item=id;
                        big_prix=valeur_item;
                    }
                }
            });
            GM_setValue(GladiatusFuncoes.get_server()+"total_medium",total_medium);
            GM_setValue(GladiatusFuncoes.get_server()+"total_low",total_low);
            GM_setValue(GladiatusFuncoes.get_server()+"total_inv",total_shop);
            GM_setValue(GladiatusFuncoes.get_server()+"big_item_inv",big_item);
            GM_setValue(GladiatusFuncoes.get_server()+"low_item_inv",low_item);
            if(medium_item!=""){
                GM_setValue(GladiatusFuncoes.get_server()+"medium_item_inv",medium_item);
            }else{
                GM_setValue(GladiatusFuncoes.get_server()+"medium_item_inv","");
            }
            if(low_low_item!=""){
                GM_setValue(GladiatusFuncoes.get_server()+"low_low_item_inv",low_low_item);
                // alert(low_item);
            }else{
                GM_setValue(GladiatusFuncoes.get_server()+"low_low_item_inv","");
            }
            return tab_item;
        },
        menu_expedicao : function(){
            if($("#submenu1>a").length){
                let menu_bu = $("#submenu1>a");
                if($("#caixa_menu").length){
                    let menuCtrl = $("#caixa_menu"),
                        title='',
                        loc='';
                    $.each(menu_bu,function(i){
                        title = GladiatusFuncoes.trim($("#submenu2>a[target='_self']").eq(i).text());
                        loc = $("#submenu2>a[href]").eq(i).attr("href");
                        if (i > 0) {
                            if (title != '') {
                                if(title.search('Tundra') != -1) {
                                    menuCtrl.append("<option value='tundra'>"+title+"</option>");
                                } else{
                                    loc = loc.split("loc=")[1];
                                    if(loc !== undefined){
                                        menuCtrl.append("<option value='"+loc.substr(0,1)+"'>"+title+"</option>");
                                    }
                                }
                            }
                        }
                    });

                    $(menuCtrl).change(function(){
                        GM_setValue(GladiatusFuncoes.get_server()+"expedicao_atual",this.value);
                        GM_setValue(GladiatusFuncoes.get_server()+"expedicaoQuem",this.options[this.selectedIndex].innerHTML);
                        window.location.href=window.location.href;
                    });
                }
            }
        },
        menu_Masmorra : function(){
            let menuCtrl = $("#caixa_menu_masmo");
            $(menuCtrl).change(function(){
                GM_setValue(GladiatusFuncoes.get_server()+"masmorra_atual",this.value);
                window.location.href=window.location.href;
            });
        }
    };
var gladiatus = {
    url : function(){
        //return document.location.href;
    },
    link : function(x){
        var link = "index.php";
        var front = "?";
        var i=0;
        for(i in x){
            link+=front+i+"="+x[i];
            if(front=="?")front="&";
        }
        return link+front+"sh="+id_sessao;
    },
    leilao : function(leilaoLance,leilaoNome,itemType){//3,'Mercenario',9
        var leilaoCheio = 0;//alert(leilaoLance);
        $.ajax({
            url: 'https://'+GladiatusFuncoes.get_server()+'.gladiatus.gameforge.com/game/index.php?mod=auction&ttype='+leilaoLance+'&sh='+id_sessao,
            type: 'POST',
            data: 'doll=1&qry=&itemLevel=1&itemType='+itemType+'&itemQuality=-1',
            success: function(data) {
                if($(data).find("#auction_table>table>tbody>tr").length){
                    var leilao = $(data).find("#auction_table>table>tbody>tr");//$('.textbarea').text(leilao.html());alert('');
                    var bid_amount = 0,
                        auctionid = 0,
                        bid_amount1 = 0,
                        bid_amount2=0,
                        status1='',
                        status2='',
                        rubi1='',
                        rubi2='';
                    $(leilao).each(function(){
                        status1 = $(this).find("td:eq(0)>div>form>.auction_bid_div>div:eq(0)").text().trim();
                        status2 = 'Item não encontrado';
                        if($(this).find("td:eq(1)>div>form>").length >0){
                            status2 = $(this).find("td:eq(1)>div>form>.auction_bid_div>div:eq(0)").text().trim();
                        }//alert(status1 + ' - ' + status2);
                        if(status1 == 'Não existem licitações.'){
                            rubi1 = $(this).find("td:eq(0)>div>form>.auction_bid_div").html().split("&nbsp;")[2].replace(/[^a-zA-Z0-9]/g,"");
                            if(parseInt(rubi1) >= 40){
                                bid_amount1 = $(this).find("td:eq(0)>div>form>.auction_bid_div>input[name='bid_amount']").val();
                                if(parseInt(bid_amount1)<=parseInt(my_gold) && parseInt(bid_amount)<parseInt(bid_amount1)){
                                    bid_amount = $(this).find("td:eq(0)>div>form>div>input[name='bid_amount']").val();
                                    auctionid = $(this).find("td:eq(0)>div>form>input[name='auctionid']").val();
                                    leilaoCheio = 1;
                                }
                            }
                        }else if(status2 == 'Não existem licitações.'){
                            rubi2 = $(this).find("td:eq(1)>div>form>.auction_bid_div").html().split("&nbsp;")[2].replace(/[^a-zA-Z0-9]/g,"");
                            if(parseInt(rubi2.substr(rubi2.length - 2)) >= 40){
                                bid_amount2 = $(this).find("td:eq(1)>div>form>.auction_bid_div>input[name='bid_amount']").val();
                                if(parseInt(bid_amount2)<=parseInt(my_gold) && parseInt(bid_amount)<parseInt(bid_amount2)){
                                    bid_amount = $(this).find("td:eq(1)>div>form>div>input[name='bid_amount']").val();
                                    auctionid = $(this).find("td:eq(1)>div>form>input[name='auctionid']").val();
                                    leilaoCheio = 1;
                                }
                            }
                        }
                        /*
                        if(status1 == 'Não existem licitações.' || status2 == 'Não existem licitações.'){
                            rubi1 = $(this).find("td:eq(0)>div>form>.auction_bid_div").html().split("&nbsp;")[2].replace(/[^a-zA-Z0-9]/g,""); //$(this).find("td:eq(0)>div>form>.auction_bid_div").text().split(".")[3].replace(/[^a-zA-Z0-9]/g,"");
                            if(parseInt(rubi1) >= 40){
                                bid_amount1 = $(this).find("td:eq(0)>div>form>.auction_bid_div>input[name='bid_amount']").val();
                                if(parseInt(bid_amount1)<=parseInt(my_gold) && parseInt(bid_amount)<parseInt(bid_amount1)){
                                    bid_amount = $(this).find("td:eq(0)>div>form>div>input[name='bid_amount']").val();
                                    auctionid = $(this).find("td:eq(0)>div>form>input[name='auctionid']").val();
                                    leilaoCheio = 1;
                                }
                            }
                            //if($(this).find("td:eq(1)>div>form>").length >0){
                            if(status2 != '100por1'){
                                rubi2 = $(this).find("td:eq(1)>div>form>.auction_bid_div").html().split("&nbsp;")[2].replace(/[^a-zA-Z0-9]/g,""); //$(this).find("td:eq(1)>div>form>.auction_bid_div").text().split(".")[3].replace(/[^a-zA-Z0-9]/g,"");
                                //auctionid = $(this).find("td:eq(1)>div>form>input[name='auctionid']").val();
                                if(parseInt(rubi2.substr(rubi2.length - 2)) >= 40){
                                    bid_amount2 = $(this).find("td:eq(1)>div>form>.auction_bid_div>input[name='bid_amount']").val();
                                    if(parseInt(bid_amount2)<=parseInt(my_gold) && parseInt(bid_amount)<parseInt(bid_amount2)){
                                        bid_amount = $(this).find("td:eq(1)>div>form>div>input[name='bid_amount']").val();
                                        auctionid = $(this).find("td:eq(1)>div>form>input[name='auctionid']").val();
                                        leilaoCheio = 1;
                                    }
                                }
                            }
                        }*/
                    });
                    if(auctionid>0){
                        var itemType = $(data).find("form[id='auctionForm"+auctionid+"']>input[name='itemType']").val();
                        var itemLevel = $(data).find("form[id='auctionForm"+auctionid+"']>input[name='itemLevel']").val();

                        var itemQuality = $(data).find("form[id='auctionForm"+auctionid+"']>input[name='itemQuality']").val();
                        var buyouthd = $(data).find("form[id='auctionForm"+auctionid+"']>input[name='buyouthd']").val();
                        var qry = '';
                        //document.getElementById('eventoVitorias').innerHTML = 'auctionid='+auctionid+'&qry='+qry+'&itemType='+itemType+'&itemLevel='+itemLevel+'&itemQuality='+itemQuality+'&buyouthd='+buyouthd+'&bid_amount='+bid_amount+'&bid=Proposta';
                        $.ajax({
                            url: 'https://'+GladiatusFuncoes.get_server()+'.gladiatus.gameforge.com/game/index.php?mod=auction&submod=placeBid&ttype=2&rubyAmount=0&sh='+id_sessao,
                            type: 'POST',
                            data: 'auctionid='+auctionid+'&qry='+qry+'&itemType='+itemType+'&itemLevel='+itemLevel+'&itemQuality='+itemQuality+'&buyouthd='+buyouthd+'&bid_amount='+bid_amount+'&bid=Proposta',
                            success: function(data) {
                                GM_setValue(GladiatusFuncoes.get_server()+"TotalLancesLeilao",parseInt(GM_getValue(GladiatusFuncoes.get_server()+"TotalLancesLeilao")) + 1);
                                GM_setValue(GladiatusFuncoes.get_server()+"TotalOuroLeilao",parseInt(GM_getValue(GladiatusFuncoes.get_server()+"TotalOuroLeilao")) + parseInt(bid_amount));
                                window.location.href=window.location.href;
                            }
                        });
                    }else{
                        //Se o leilão de amuletos estiver cheio joga para o de aneis...
                        if(leilaoLance==3){
                            gladiatus.leilao(2,'Gladiador',6);
                        }else{
                            gladiatus.leilao(3,'Mercenario',6);
                        }
                        //document.getElementById('eventoVitorias').innerHTML = 'Propostas feita: '+ GM_getValue(GladiatusFuncoes.get_server()+"TotalLancesLeilao") + ' | Próximo item: ' + bid_amount_Next + '<br> Leilão: '+leilaoNome+'  | Ouro Ajuntado: ' + moeda(GM_getValue(GladiatusFuncoes.get_server()+"TotalOuroLeilao"),2,',','.');
                    }
                }
                return leilaoCheio;
            }
        });
    },
    LeilaoMercenarioTempo : function(){
        $.ajax({
            url: gladiatus.link({"mod":"auction","fl":"999","ttype":"3"}),
            type: 'GET',
            success: function(data){
                $("#leilaoMercenario").html('Leilão Mercenário: '+$(data).find('.description_span_right').text());
                GM_setValue(GladiatusFuncoes.get_server()+"LeilaoMercenarioStatus",$(data).find('.description_span_right').text().trim());
                if($(data).find('.description_span_right').text()=='Bastante curto-'){
                    if(GM_getValue(GladiatusFuncoes.get_server()+"desativaEmail")==0){
                        GladiatusFuncoes.tocaSom();
                    }else{
                        GladiatusFuncoes.send_mailNotify('Leilão do Mercenário---Leilão do Mercenário em Bastante curto...');
                    }
                }
            }
        });
        return 'ok';
    },
    LeilaoGladiadorTempo : function(){
        $.ajax({
            url: gladiatus.link({"mod":"auction","fl":"999"}),
            type: 'GET',
            success: function(data){
                $("#leilaoGladiador").html('Leilão Gladiador: '+$(data).find('.description_span_right').text()+'');
                GM_setValue(GladiatusFuncoes.get_server()+"LeilaoGladiadorStatus",$(data).find('.description_span_right').text().trim())
                if($(data).find('.description_span_right').text()=='Bastante curto-'){
                    if(GM_getValue(GladiatusFuncoes.get_server()+"desativaEmail")==0){
                        GladiatusFuncoes.tocaSom();
                    }else{
                        GladiatusFuncoes.send_mailNotify('Leilão do Gladiador---Leilão do Gladiador em Bastante curto...');
                    }
                }
            }
        });
        return 'ok';
    },
    LeilaoCompraCuras : function(){
        $.ajax({
            url: 'https://'+GladiatusFuncoes.get_server()+'.gladiatus.gameforge.com/game/index.php?mod=auction&ttype=2&sh='+id_sessao,
            type: 'POST',
            data: 'doll=1&qry=&itemLevel=1&itemType=7&itemQuality=-1',
            success: function(data) {
                if($(data).find("#auction_table>table>tbody>tr").length){
                    var leilao = $(data).find("#auction_table>table>tbody>tr");
                    var bid_amount = 0,
                        auctionid = 0,
                        bid_amount1 = 0,
                        bid_amount2=0,
                        status1='',
                        status2='';
                    $(leilao).each(function(){
                        status1 = $(this).find("td:eq(0)>div>form>.auction_bid_div>div:eq(0)").text().trim();//alert($(this).find("td:eq(1)>div>form>").length);
                        status2 = 'Cura Não encontrada';
                        if($(this).find("td:eq(1)>div>form>").length >0){
                            status2 = $(this).find("td:eq(1)>div>form>.auction_bid_div>div:eq(0)").text().trim();
                        }
                        /* || status1 == 'Já existem licitações.' || status2 == 'Já existem licitações.'*/
                        if(status1 == 'Não existem licitações.' || status1 == 'Já existem licitações.--'){
                            bid_amount1 = $(this).find("td:eq(0)>div>form>.auction_bid_div>input[name='bid_amount']").val();
                            if(parseInt(bid_amount1)<=parseInt(my_gold) && parseInt(bid_amount)<parseInt(bid_amount1)){
                                bid_amount = $(this).find("td:eq(0)>div>form>div>input[name='bid_amount']").val();
                                auctionid = $(this).find("td:eq(0)>div>form>input[name='auctionid']").val();
                            }
                        }else if(status2 == 'Não existem licitações.' || status2 == 'Já existem licitações.--'){
                            bid_amount1 = $(this).find("td:eq(1)>div>form>.auction_bid_div>input[name='bid_amount']").val();
                            if(parseInt(bid_amount1)<=parseInt(my_gold) && parseInt(bid_amount)<parseInt(bid_amount1)){
                                bid_amount = $(this).find("td:eq(1)>div>form>div>input[name='bid_amount']").val();
                                auctionid = $(this).find("td:eq(1)>div>form>input[name='auctionid']").val();
                            }
                        }
                    });
                    if(auctionid>0){
                        var itemType = $(data).find("form[id='auctionForm"+auctionid+"']>input[name='itemType']").val();
                        var itemLevel = $(data).find("form[id='auctionForm"+auctionid+"']>input[name='itemLevel']").val();
                        var itemQuality = $(data).find("form[id='auctionForm"+auctionid+"']>input[name='itemQuality']").val();
                        var buyouthd = $(data).find("form[id='auctionForm"+auctionid+"']>input[name='buyouthd']").val();
                        var qry = '';
                        //document.getElementById('eventoVitorias').innerHTML = 'auctionid='+auctionid+'&qry='+qry+'&itemType='+itemType+'&itemLevel='+itemLevel+'&itemQuality='+itemQuality+'&buyouthd='+buyouthd+'&bid_amount='+bid_amount+'&bid=Proposta';
                        $.ajax({
                            url: 'https://'+GladiatusFuncoes.get_server()+'.gladiatus.gameforge.com/game/index.php?mod=auction&submod=placeBid&ttype=2&rubyAmount=0&sh='+id_sessao,
                            type: 'POST',
                            data: 'auctionid='+auctionid+'&qry='+qry+'&itemType='+itemType+'&itemLevel='+itemLevel+'&itemQuality='+itemQuality+'&buyouthd='+buyouthd+'&bid_amount='+bid_amount+'&bid=Proposta',
                            success: function(data) {
                                my_gold = parseInt(my_gold)-parseInt(bid_amount);
                                GM_setValue(GladiatusFuncoes.get_server()+"TotalCuraLeilao",parseInt(GM_getValue(GladiatusFuncoes.get_server()+"TotalCuraLeilao")) + 1);
                                document.getElementById('eventoVitorias').innerHTML += '<span class="label label-success">Cura compra de '+bid_amount+"      <small>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ouro "+my_gold+"</small></span><br>";
                                //window.location.href = window.location.href;
                                let valorR = GladiatusFuncoes.rand(1000,10000);
                                setTimeout(function(){gladiatus.LeilaoCompraCuras();}, valorR);
                            }
                        });
                    }else{
                        var bid_amount_Next ='';
                        if(bid_amount1>=bid_amount2){
                            bid_amount_Next = bid_amount1;
                        }else{
                            bid_amount_Next = bid_amount2;
                        }
                    }
                }
            }
        });
        return 'ok';
    },
    GaragemSamu : function(){
        //https://s29-br.gladiatus.gameforge.com/game/index.php?mod=packages&f=7&fq=-1&qry=&page=1&sh=85a3c9b7f4e67599d9fdf16b5d298071
        $.ajax({
            url: gladiatus.link({"mod":"packages","f":"7","fq":"-1","qry":"","page":"1"}),
            type: 'GET',
            success: function(data){
                if($(data).find("section>#packages").length){
                    var toX = 0, toY = 0, measurementX = 0, measurementY =0,i=0,j=0;
                    for(i=1; i<=8; i++){
                        for(j=1;j<=5; j++){/*
                            if($("#inv>div[data-position-x='"+i+"'][data-position-y='"+j+"']").length){
                                measurementX = $("#inv>div[data-position-x='"+i+"'][data-position-y='"+j+"']").attr("data-measurement-x");
                                measurementY = $("#inv>div[data-position-x='"+i+"'][data-position-y='"+j+"']").attr("data-measurement-y");
                                $('.textbarea').text(measurementX+'-'+measurementY);
                            }*/
                            if(!$("#inv>div[data-position-x='"+i+"'][data-position-y='"+j+"']").length){
                                if(toX==0){
                                    toX = i;
                                    toY = j;
                                }
                            }
                        }
                    }
                    //alert(toX+' - '+toY);

                    var t = new Date(),
                        a = t.getTime(),
                        GetFrom = $(data).find("section>#packages>.packageItem>input:eq(0)").val();
                    $.ajax({
                        url: 'https://'+GladiatusFuncoes.get_server()+'.gladiatus.gameforge.com/game/ajax.php?mod=inventory&submod=move&from=-'+GetFrom+'&fromX=1&fromY=1&to=512&toX='+toX+'&toY='+toY+'&amount=1',
                        type: 'POST',
                        data: 'from=-'+GetFrom+'&fromX=1&fromY=1&to=512&toX='+toX+'&toY='+toY+'&amount=1&sh='+id_sessao+'&a='+a,
                        /*async: false,*/
                        success: function(data) {
                            //document.getElementById('eventoVitorias').innerHTML = 'Cura alocada';
                        }
                    });
                }
            }
        });
        return 'ok';
    },
    CuraGladiador : function(){
        let data = new Date(),
			aa = data.getTime();
        $.ajax({
            url: 'https://'+GladiatusFuncoes.get_server()+'.gladiatus.gameforge.com/game/ajax.php',
            type: 'POST',
            data: 'mod=inventory&submod=loadBag&bag=512&shopType=0&a='+aa+'&sh='+id_sessao,
            success: function(data){
                let sangue_s = 0,
					t=0,
					sangueNovo='',
                    item='',
                    row='',
                    a='',
                    texts='',
					cura = 0,
					acheiCura = 0,
                    olheiCura = 0;
                GM_setValue(GladiatusFuncoes.get_server()+"ContaSemCura",parseInt(GM_getValue(GladiatusFuncoes.get_server()+"ContaSemCura")) + 1);
                $(data).each(function(i){
                    if(sangue_s==0){
                        item = $(this).data('tooltip');
						row = item[0];
						if($(this).data('basis').indexOf("7-")!=-1){
                        //if (row[0] instanceof Array && row[1] instanceof Array) {
                            t = new Date();
                            a = t.getTime();
                            cura = 0;
                            if(row[1] !==undefined){
                                texts = row[1];//alert(texts[0]);
                                if(texts[0].indexOf("Usar: Cura")!=-1){
                                    cura = texts[0].replace(/[^\d]+/g,'');
                                    sangueNovo = $(this);
                                    sangue_s = 1;
                                    acheiCura = 1;
                                    GM_setValue(GladiatusFuncoes.get_server()+"ContaSemCura",0);
                                }else{
                                    if(row[2] !==undefined){
                                        texts = row[2];
                                        if(texts[0].indexOf("Usar: Cura")!=-1){
                                            cura = texts[0].replace(/[^\d]+/g,'');
                                            sangueNovo = $(this);
                                            sangue_s = 1;
                                            acheiCura = 1;
                                            GM_setValue(GladiatusFuncoes.get_server()+"ContaSemCura",0);
                                        }
                                    }
                                }
                                let meSangueMin = parseInt(tab_sague_total / 100 * 20); //-1;
                                if ((tab_sague_total - tab_sangue >= cura && cura > 0 && sangue_s==1) || (tab_sangue<=meSangueMin && sangue_s==1)){
                                    $.ajax({
                                        url: 'https://'+GladiatusFuncoes.get_server()+'.gladiatus.gameforge.com/game/ajax.php?mod=inventory&submod=move&from=512&fromX='+$(sangueNovo).data("position-x")+'&fromY='+$(sangueNovo).data("position-y")+'&to=8&toX='+$(sangueNovo).data("measurement-x")+'&toY='+$(sangueNovo).data("measurement-y")+'&amount='+$(sangueNovo).data("amount")+'&doll=1&a='+a+'&sh='+id_sessao,
                                        type: 'POST',
                                        data: 'from=512&fromX='+$(sangueNovo).data("position-x")+'&fromY='+$(sangueNovo).data("position-y")+'&to=8&toX='+$(sangueNovo).data("measurement-x")+'&toY='+$(sangueNovo).data("measurement-y")+'&amount='+$(sangueNovo).data("amount")+'&doll=1&a='+a+'&sh='+id_sessao,
                                        success: function(data) {
                                            window.location.href = window.location.href;
                                        }
                                    });
                                }
                                $("#comida").html(cura+' ['+((sangue_perdido / cura)*100).toFixed(2)+'%]');
                            }
						}
                        //}
                    }
                });
                if(GM_getValue(GladiatusFuncoes.get_server()+"ContaSemCura") >=3){
                    GM_setValue(GladiatusFuncoes.get_server()+"ContaSemCura",0);
                //if(acheiCura==0){
                    GM_setValue(GladiatusFuncoes.get_server()+"arena_quest",0);
                    GM_setValue(GladiatusFuncoes.get_server()+"exp_quest",0);
                    if(GM_getValue(GladiatusFuncoes.get_server()+"desativaEmail")==0){
                        GladiatusFuncoes.tocaSom();
                    }else{
                        GladiatusFuncoes.send_mailNotify('Curas Gladiador---Ficamos sem cura, Arena e Expedição desativado...');
                    }
                }
                document.getElementById('eventoVitorias').innerHTML += '<span class="label label-success">Contagem cura = ' + GM_getValue(GladiatusFuncoes.get_server()+"ContaSemCura")+"</span><br>";
            }
        });
    },
    AdicionaBag : function(){
        let data = new Date(),
			aa = data.getTime();
        $.ajax({
            url: 'https://'+GladiatusFuncoes.get_server()+'.gladiatus.gameforge.com/game/ajax.php',
            type: 'POST',
            data: 'mod=inventory&submod=loadBag&bag=512&shopType=0&a='+aa+'&sh='+id_sessao,
            success: function(data){
                let sangue_s = 0,
					t=0,
					sangueNovo='',
                    item='',
                    row='',
                    a='',
                    texts='',
					cura = 0,
					acheiCura = 0,
                    olheiCura = 0;
                $(data).each(function(i){
                    if(sangue_s==0){
                        item = $(this).data('tooltip');
                        row = item[0];
                        t = new Date();
                        a = t.getTime();
                        cura = 0;
                        if(row[1] !==undefined){
                            texts = row[1];//alert(texts[0]);
                            cura = texts[0].replace(/[^\d]+/g,'');
                            sangueNovo = $(this);
                            sangue_s = 1;
                            acheiCura = 1;
                        }else if(row[2] !==undefined){
                            texts = row[2];
                            cura = texts[0].replace(/[^\d]+/g,'');
                            sangueNovo = $(this);
                            sangue_s = 1;
                            acheiCura = 1;
                        }
                        //alert($(sangueNovo).data("item-id"));
                        if ($(sangueNovo).data("item-id")){
                            //alert(GM_getValue(GladiatusFuncoes.get_server()+"CriaBagValor"));
                            let ValorPack = GM_getValue(GladiatusFuncoes.get_server()+"CriaBagValor");
                            if(((ValorPack / 100) * 2) < my_gold){//alert('deu');
                                $.ajax({
                                    url: 'https://'+GladiatusFuncoes.get_server()+'.gladiatus.gameforge.com/game/index.php?mod=guildMarket&sh='+id_sessao,
                                    type: 'POST',
                                    data: 'sellid='+$(sangueNovo).data("item-id")+'&preis='+ValorPack+'&dauer=1&anbieten=Oferta',
                                    success: function(data) {
                                        //alert('ok');
                                        GM_setValue(GladiatusFuncoes.get_server()+"CriaBagValor",0);
                                    }
                                });
                            }else{
                                //alert(ValorPack+' | '+my_gold);
                            }
                        }
                    }
                });
            }
        });
    },
    EventoEspecial : function(){
        //if(GM_getValue(GladiatusFuncoes.get_server()+"tempo_evento")<=0){
            $.ajax({
                url: gladiatus.link({"mod":"location","submod":"serverQuest","loc":GM_getValue(GladiatusFuncoes.get_server()+"eventoEspecialNome")}),
                type: 'GET',
                success: function(data){
                    if($(data).find("#content>div>div[class='section-header']>span[class='ticker']").length){
                        var ticker = $(data).find("#content>div>div[class='section-header']>span")[0].getAttribute("data-ticker-time-left");
                        GM_setValue(GladiatusFuncoes.get_server()+"tempo_evento",ticker);
                        GladiatusFuncoes.setEventoTempo ();
                    }else{
                        GM_setValue(GladiatusFuncoes.get_server()+"tempo_evento",0);
                        GladiatusFuncoes.setEventoTempo();
                    }
                }
            });
        /*}else{
            if($("#content").find("div>div[class='section-header']>span[class='ticker']").length){
                var ticker = $("#content").find(">div>div[class='section-header']>span")[0].getAttribute("data-ticker-time-left");
                GM_setValue(GladiatusFuncoes.get_server()+"tempo_evento",ticker);
                setEventoTempo ();
            }else{
                setEventoTempo();
            }
        }*/
        return 'ok';
    },
    EventoEspecialHighscore : function(){
        $.ajax({
            url: gladiatus.link({"mod":"location","submod":"serverQuestHighscore","loc":GM_getValue(GladiatusFuncoes.get_server()+"eventoEspecialNome")}),
            type: 'GET',
            success: function(data){
                let usuarioTopNome = $(data).find("table[class='section-like narrow']>tbody>tr:eq(1)>td:eq(0)").text(),
					usuarioTopVitoria = $(data).find("table[class='section-like narrow']>tbody>tr:eq(1)>td:eq(3)").text();
                /*if(trim(usuarioTopNome)==usglAuto){
                    usuarioTopNome = $(data).find("table[class='section-like narrow']>tbody>tr:eq(2)>td:eq(0)").text();
                    usuarioTopVitoria = $(data).find("table[class='section-like narrow']>tbody>tr:eq(2)>td:eq(3)").text();
                }*/
                let usuarioTopNome3 = $(data).find("table[class='section-like narrow']>tbody>tr:eq(2)>td:eq(0)").text(),
					usuarioTopVitoria3 = $(data).find("table[class='section-like narrow']>tbody>tr:eq(2)>td:eq(3)").text(),
					usuario100por1Vitoria = $(data).find("table[class='section-like narrow']>tbody>tr[class='alt highlight']>td:eq(3)").text();
                document.getElementById('eventoVitorias').innerHTML += 'Meus pontos: ['+usuario100por1Vitoria+'] <br> Evento TOP 1: ' + usuarioTopNome + '['+usuarioTopVitoria+'] <br> Evento TOP 2: ' + usuarioTopNome3 + '['+usuarioTopVitoria3+']<br>';

                GM_setValue(GladiatusFuncoes.get_server()+"Rank100por1",usuario100por1Vitoria);
                GM_setValue(GladiatusFuncoes.get_server()+"RankSegundo",usuarioTopVitoria);
                let Rank100por1 = GM_getValue(GladiatusFuncoes.get_server()+"Rank100por1"),
                    RankSegundo = GM_getValue(GladiatusFuncoes.get_server()+"RankSegundo"),
                    max_evento = GM_getValue(GladiatusFuncoes.get_server()+"max_evento");
                if(parseInt(Rank100por1)>=parseInt(RankSegundo)+parseInt(max_evento)){
                    GM_setValue(GladiatusFuncoes.get_server()+"eventoEspecial",0);
                }else{
                    if(GM_getValue(GladiatusFuncoes.get_server()+"eventoEspecial")==0){
                        GM_setValue(GladiatusFuncoes.get_server()+"eventoEspecial",1);
                        setTimeout(function(){window.location.href=window.location.href;}, 5000);
                    }
                }
                //if(parseInt(usuario100por1Vitoria)>=max_evento){
                    //GM_setValue(GladiatusFuncoes.get_server()+"eventoEspecial",0);
                    //$('#onoffCT').click();
                //}
            }
        });
        return 'ok';
    },
    PlayLicencaUso : function(){
        console.log('PLAY LICENSE DISABLED');
        /* $.ajax({
            url: gladiatus.link({"mod":"overview","doll":"1"}),
            type: 'GET',
            success: function(data){
                if($(data).find("td>.player_name_bg>.playername_achievement").length){
                    GM_setValue(GladiatusFuncoes.get_server()+"playername_achievement",GladiatusFuncoes.trim($(data).find("td>.player_name_bg>.playername_achievement").text()));
                }
                if(GM_getValue(GladiatusFuncoes.get_server()+"playername_achievement")!=''){
                    var myData = new FormData();
                    myData.append("play", GM_getValue(GladiatusFuncoes.get_server()+"playername_achievement"));
                    GM_xmlhttpRequest({
                        method: "POST",
                        url: hostExterno+"play.php",
                        data: myData,
                        onload: function(response) {
                            if(GladiatusFuncoes.trim(response.responseText)==1){
                                GM_setValue(GladiatusFuncoes.get_server()+"playername_valido",1);
                                $('.tool_box').show();
                            }else{
                                GM_setValue(GladiatusFuncoes.get_server()+"playername_valido",0);
                                $('.tool_box').hide();
                            }
                        }
                    });
                }
            }
        }); */
        return 'ok';
    }
}

if (GM_getValue(GladiatusFuncoes.get_server()+"BotLeilaoLance") ==1){
    let idLeilaoMercenario = 0, idLeilaoGladiador = 0;
    switch (GM_getValue(GladiatusFuncoes.get_server()+"LeilaoMercenarioStatus")) {
        case 'Muito Longo':
            idLeilaoMercenario = 5;
            break;
        case 'Longo':
            idLeilaoMercenario = 4;
            break;
        case 'Médio':
            idLeilaoMercenario = 3;
            break;
        case 'Curto':
            idLeilaoMercenario = 2;
            break;
        case 'Muito Curto':
            idLeilaoMercenario = 1;
            break;
    }
    switch (GM_getValue(GladiatusFuncoes.get_server()+"LeilaoGladiadorStatus")) {
        case 'Muito Longo':
            idLeilaoGladiador = 5;
            break;
        case 'Longo':
            idLeilaoGladiador = 4;
            break;
        case 'Médio':
            idLeilaoGladiador = 3;
            break;
        case 'Curto':
            idLeilaoGladiador = 2;
            break;
        case 'Muito Curto':
            idLeilaoGladiador = 1;
            break;
    }
    //alert(idLeilaoGladiador+'-'+idLeilaoMercenario);
    let leilaoLance = '',leilaoNome='';
    if(idLeilaoGladiador<idLeilaoMercenario){
        leilaoLance = 3;
        leilaoNome = 'Mercenario';
    }else{
        leilaoLance = 2;
        leilaoNome = 'Gladiador';
    }
    //alert(leilaoNome);
    //if(gladiatus.leilao(leilaoLance,leilaoNome,9)==0){
        if(leilaoLance==3){
            gladiatus.leilao(3,'Mercenario',9);
            /*
            if(gladiatus.leilao(2,'Gladiador',9)==0){alert('1');
                if(gladiatus.leilao(2,'Gladiador',6)==0){alert('2');
                    if(gladiatus.leilao(3,'Mercenario',6)==0){alert('3');}
                }
            }*/
        }else{
            //alert(retornoLanceLeilao);
            gladiatus.leilao(2,'Gladiador',9);/*
            if(gladiatus.leilao(3,'Mercenario',9)==0){alert('a');
                if(gladiatus.leilao(2,'Gladiador',6)==0){alert('b');
                    if(gladiatus.leilao(3,'Mercenario',6)==0){alert('c');}
                }
            } */
        }/*
        if(gladiatus.leilao(leilaoLance,leilaoNome,9)==0){
            if(gladiatus.leilao(2,'Gladiador',6)==0){
                if(gladiatus.leilao(3,'Mercenario',6)==0){}
            }
        }*/
   //}
}

//tab_sangue = tab_sangue[1].split('\\/')[0].trim();

let sangue_perdido = tab_sague_total - tab_sangue,
    pEXP = ((GM_getValue(GladiatusFuncoes.get_server()+"contador_Exp") /(GM_getValue(GladiatusFuncoes.get_server()+"contador_Exp") +GM_getValue(GladiatusFuncoes.get_server()+"contador_ExpM")))* 100).toFixed(2);
if (pEXP=='NaN'){pEXP = 100;}
let pMas = ((GM_getValue(GladiatusFuncoes.get_server()+"contador_Mas") / (GM_getValue(GladiatusFuncoes.get_server()+"contador_Mas")+GM_getValue(GladiatusFuncoes.get_server()+"contador_MasM")))*100).toFixed(2);
if (pMas=='NaN'){pMas = 100;}
let pAre = ((GM_getValue(GladiatusFuncoes.get_server()+"contador_arena") / (GM_getValue(GladiatusFuncoes.get_server()+"contador_arena")+GM_getValue(GladiatusFuncoes.get_server()+"contador_arenaM")))*100).toFixed(2);
if (pAre=='NaN'){pAre = 100;}
let pCTu = ((GM_getValue(GladiatusFuncoes.get_server()+"contador_CT") / (GM_getValue(GladiatusFuncoes.get_server()+"contador_CT")+GM_getValue(GladiatusFuncoes.get_server()+"contador_CTM")))*100).toFixed(2);
if (pCTu=='NaN'){pCTu = 100;}
let pVid = ((tab_sangue / tab_sague_total)*100).toFixed(2);

let percentual =(GM_getValue(GladiatusFuncoes.get_server()+"stat_victoire")/ GM_getValue(GladiatusFuncoes.get_server()+"stat_combat")*100).toFixed(2);



let getExpOnOff = GM_getValue(GladiatusFuncoes.get_server()+"gladiatus_exp_onoff");	/*Ativa Desativa os Ataques */
//alert(getExpOnOff);

//Criar lista de Arena Forte
if(!GM_getValue(GladiatusFuncoes.get_server()+"ArenaForte")){
    GM_setValue(GladiatusFuncoes.get_server()+"ArenaForte",JSON.stringify(ArenaForte));
}else{
    if(GM_getValue(GladiatusFuncoes.get_server()+"ArenaForte")==''){
        ArenaForte=[];
    }else{
        ArenaForte=JSON.parse(GM_getValue(GladiatusFuncoes.get_server()+"ArenaForte"));
    }
}
//Criar lista Branca
if(!GM_getValue(GladiatusFuncoes.get_server()+"ListaBranca")){
    GM_setValue(GladiatusFuncoes.get_server()+"ListaBranca",JSON.stringify(ListaBranca));
}else{
    if(GM_getValue(GladiatusFuncoes.get_server()+"ListaBranca")==''){
        ListaBranca=[];
    }else{
        ListaBranca=JSON.parse(GM_getValue(GladiatusFuncoes.get_server()+"ListaBranca"));
    }
}ListaBranca
if(!GM_getValue(GladiatusFuncoes.get_server()+"Rank100por1")){GM_setValue(GladiatusFuncoes.get_server()+"Rank100por1",0);}
if(!GM_getValue(GladiatusFuncoes.get_server()+"RankSegundo")){GM_setValue(GladiatusFuncoes.get_server()+"RankSegundo",0);}

if(!GM_getValue(GladiatusFuncoes.get_server()+"fightNow")){GM_setValue(GladiatusFuncoes.get_server()+"fightNow",'');}
if(!GM_getValue(GladiatusFuncoes.get_server()+"ataqueSemHonra")){GM_setValue(GladiatusFuncoes.get_server()+"ataqueSemHonra",0);}

if(!GM_getValue(GladiatusFuncoes.get_server()+"expedicaoQuem")){GM_setValue(GladiatusFuncoes.get_server()+"expedicaoQuem",'undefined');}

if(!GM_getValue(GladiatusFuncoes.get_server()+"max_Hora")){GM_setValue(GladiatusFuncoes.get_server()+"max_Hora",'23:59');}
if(!GM_getValue(GladiatusFuncoes.get_server()+"min_Hora")){GM_setValue(GladiatusFuncoes.get_server()+"min_Hora",'08:00');}

//Filtro do tipo de Expedição
if(!GM_getValue(GladiatusFuncoes.get_server()+"filtro_Expe")){GM_setValue(GladiatusFuncoes.get_server()+"filtro_Expe","ND");}
//Filtro do tipo de masmorra
if(!GM_getValue(GladiatusFuncoes.get_server()+"filtro_Masm")){GM_setValue(GladiatusFuncoes.get_server()+"filtro_Masm	","ND");}

if(!GM_getValue(GladiatusFuncoes.get_server()+"tempoMax")){GM_setValue(GladiatusFuncoes.get_server()+"tempoMax",50001);}
if(!GM_getValue(GladiatusFuncoes.get_server()+"tempoMin")){GM_setValue(GladiatusFuncoes.get_server()+"tempoMin",30000);}

/*Contador Expedição*/
if(!GM_getValue(GladiatusFuncoes.get_server()+"contador_Exp")){GM_setValue(GladiatusFuncoes.get_server()+"contador_Exp",0);}
if(!GM_getValue(GladiatusFuncoes.get_server()+"contador_ExpM")){GM_setValue(GladiatusFuncoes.get_server()+"contador_ExpM",0);}
/*Contador Expedição FIM

Contador Arena*/
if(!GM_getValue(GladiatusFuncoes.get_server()+"contador_arena")){GM_setValue(GladiatusFuncoes.get_server()+"contador_arena",0);}
if(!GM_getValue(GladiatusFuncoes.get_server()+"contador_arenaM")){GM_setValue(GladiatusFuncoes.get_server()+"contador_arenaM",0);}
/*Contador Arena FIM

Contador CT*/
if(!GM_getValue(GladiatusFuncoes.get_server()+"contador_CT")){GM_setValue(GladiatusFuncoes.get_server()+"contador_CT",0);}
if(!GM_getValue(GladiatusFuncoes.get_server()+"contador_CTM")){GM_setValue(GladiatusFuncoes.get_server()+"contador_CTM",0);}
/*Contador CT FIM

Contador MASMORRA*/
if(!GM_getValue(GladiatusFuncoes.get_server()+"contador_Mas")){GM_setValue(GladiatusFuncoes.get_server()+"contador_Mas",0);}
if(!GM_getValue(GladiatusFuncoes.get_server()+"contador_MasM")){GM_setValue(GladiatusFuncoes.get_server()+"contador_MasM",0);}
/*Contador MASMORRA FIM */

/*Lances do Leilao historico*/
if(!GM_getValue(GladiatusFuncoes.get_server()+"TotalLancesLeilao")){GM_setValue(GladiatusFuncoes.get_server()+"TotalLancesLeilao",0);}
if(!GM_getValue(GladiatusFuncoes.get_server()+"TotalOuroLeilao")){GM_setValue(GladiatusFuncoes.get_server()+"TotalOuroLeilao",0);}
if(!GM_getValue(GladiatusFuncoes.get_server()+"LeilaoGladiadorStatus")){GM_setValue(GladiatusFuncoes.get_server()+"LeilaoGladiadorStatus",'');}
if(!GM_getValue(GladiatusFuncoes.get_server()+"LeilaoMercenarioStatus")){GM_setValue(GladiatusFuncoes.get_server()+"LeilaoMercenarioStatus",'');}
/*Lances do Leilao historico*/
//var $ = jQuery.noConflict();

//Verirfica o status dos ataques ativo/inativo
if(!GM_getValue(GladiatusFuncoes.get_server()+"gladiatus_cipr_onoff")){GM_setValue(GladiatusFuncoes.get_server()+"gladiatus_cipr_onoff","Sistema Inativo");}

if(!GM_getValue(GladiatusFuncoes.get_server()+"playername_achievement")){
    GM_setValue(GladiatusFuncoes.get_server()+"playername_achievement",'');
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"gold_limit_value")){
    GM_setValue(GladiatusFuncoes.get_server()+"gold_limit_value",40000);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"gold_limit_low")){
    GM_setValue(GladiatusFuncoes.get_server()+"gold_limit_low",5000);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"gold_limit_medium")){
    GM_setValue(GladiatusFuncoes.get_server()+"gold_limit_medium",10000);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"stat_combat")){
    GM_setValue(GladiatusFuncoes.get_server()+"stat_combat",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"stat_victoire")){
    GM_setValue(GladiatusFuncoes.get_server()+"stat_victoire",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"nb_quest")){
    GM_setValue(GladiatusFuncoes.get_server()+"nb_quest",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"vente_en_cours")){
    GM_setValue(GladiatusFuncoes.get_server()+"vente_en_cours",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"tempo_nova_missao")){
    GM_setValue(GladiatusFuncoes.get_server()+"tempo_nova_missao",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"tempo_evento")){
    GM_setValue(GladiatusFuncoes.get_server()+"tempo_evento",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"ct_quest")){
    GM_setValue(GladiatusFuncoes.get_server()+"ct_quest",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"arena_quest")){
    GM_setValue(GladiatusFuncoes.get_server()+"arena_quest",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"exp_quest")){
    GM_setValue(GladiatusFuncoes.get_server()+"exp_quest",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"mas_quest")){
    GM_setValue(GladiatusFuncoes.get_server()+"mas_quest",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"missoes_quest")){
    GM_setValue(GladiatusFuncoes.get_server()+"missoes_quest",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"eventoEspecialNome")){
    GM_setValue(GladiatusFuncoes.get_server()+"eventoEspecialNome",'');
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"eventoEspecial")){
    GM_setValue(GladiatusFuncoes.get_server()+"eventoEspecial",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"max_evento")){
    GM_setValue(GladiatusFuncoes.get_server()+"max_evento",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"iventario_atual")){
    GM_setValue(GladiatusFuncoes.get_server()+"iventario_atual",513);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"pacotes_atual")){
    GM_setValue(GladiatusFuncoes.get_server()+"pacotes_atual",1);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"expedicao_atual")){
    GM_setValue(GladiatusFuncoes.get_server()+"expedicao_atual",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"masmorra_atual")){
    GM_setValue(GladiatusFuncoes.get_server()+"masmorra_atual",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"verificaMissao")){
    GM_setValue(GladiatusFuncoes.get_server()+"verificaMissao",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"avisaGladiador")){
    GM_setValue(GladiatusFuncoes.get_server()+"avisaGladiador",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"avisaMercenario")){
    GM_setValue(GladiatusFuncoes.get_server()+"avisaMercenario",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"desativaSemOuroMercado")){
    GM_setValue(GladiatusFuncoes.get_server()+"desativaSemOuroMercado",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"SomParaExpedicao")){
    GM_setValue(GladiatusFuncoes.get_server()+"SomParaExpedicao",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"SomParaMSG")){
    GM_setValue(GladiatusFuncoes.get_server()+"SomParaMSG",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"desativaEmail")){
    GM_setValue(GladiatusFuncoes.get_server()+"desativaEmail",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"lutaSemHonra")){
    GM_setValue(GladiatusFuncoes.get_server()+"lutaSemHonra",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"AutoCuraLutador")){
    GM_setValue(GladiatusFuncoes.get_server()+"AutoCuraLutador",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"CompraCuraLeilao")){
    GM_setValue(GladiatusFuncoes.get_server()+"CompraCuraLeilao",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"TotalCuraLeilao")){
    GM_setValue(GladiatusFuncoes.get_server()+"TotalCuraLeilao",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"ColocaCuraMochila")){
    GM_setValue(GladiatusFuncoes.get_server()+"ColocaCuraMochila",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"BotLeilaoLance")){
    GM_setValue(GladiatusFuncoes.get_server()+"BotLeilaoLance",0);
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"ContaSemCura")){GM_setValue(GladiatusFuncoes.get_server()+"ContaSemCura",0);}
if(!GM_getValue(GladiatusFuncoes.get_server()+"action_encours")){
    GM_setValue(GladiatusFuncoes.get_server()+"action_encours","");
}
if(!GM_getValue(GladiatusFuncoes.get_server()+"CriaBagValor")){GM_setValue(GladiatusFuncoes.get_server()+"CriaBagValor",0);}

let linha_ct = '', linha_ARENA = '',linha_EXP='',linha_MAS='',linha_MIS='',linha_EVE='',select_iventario='';
if(GM_getValue(GladiatusFuncoes.get_server()+"ct_quest")==1){
    linha_ct = "<input type='checkbox' checked='yes' id='ct_quest' title='Ataques CT ON'><img title='Ataques CT' src='"+hostExterno+"cQ3sdz3/icon-grouparena.gif'>";
}else{
    linha_ct = "<input type='checkbox' id='ct_quest' title='Ataques CT OFF'><img title='Ataques CT' src='"+hostExterno+"cQ3sdz3/icon-grouparena.gif'>";
}
if(GM_getValue(GladiatusFuncoes.get_server()+"arena_quest")==1){
    linha_ARENA = "<input type='checkbox' checked='yes' id='arena_quest' title='Ataques ARENA ON'><img title='Ataques ARENA' src='"+hostExterno+"VT6Xqj4/icon-arena.gif'>";
}else{
    linha_ARENA = "<input type='checkbox' id='arena_quest' title='Ataques ARENA OFF'><img title='Ataques ARENA' src='"+hostExterno+"VT6Xqj4/icon-arena.gif'>";
}
if(GM_getValue(GladiatusFuncoes.get_server()+"exp_quest")==1){
    linha_EXP = "<input type='checkbox' checked='yes' id='exp_quest' title='Ataques EXPEDIÇÃO ON'><img title='Ataques EXPEDIÇÃO' src='"+hostExterno+"fr3VFZ3/icon-expeditionpoints.gif'>";
}else{
    linha_EXP = "<input type='checkbox' id='exp_quest' title='Ataques EXPEDIÇÃO OFF'><img title='Ataques EXPEDIÇÃO' src='"+hostExterno+"fr3VFZ3/icon-expeditionpoints.gif'>";
}
if(GM_getValue(GladiatusFuncoes.get_server()+"mas_quest")==1){
    linha_MAS = "<input type='checkbox' checked='yes' id='mas_quest' title='Ataques MASMORRA ON'><img title='Ataques MASMORRA' src='"+hostExterno+"mRxbHt9/icon-dungeonpoints.gif'>";
}else{
    linha_MAS = "<input type='checkbox' id='mas_quest' title='Ataques MASMORRA OFF'><img title='Ataques MASMORRA' src='"+hostExterno+"mRxbHt9/icon-dungeonpoints.gif'>";
}
if(GM_getValue(GladiatusFuncoes.get_server()+"missoes_quest")==1){
    linha_MIS = "<input type='checkbox' checked='yes' id='missoes_quest' title='MISSÕES ON'><img title='MISSÕES' src='"+hostExterno+"2dT3wtn/powerup-1.gif'>";
}else{
    linha_MIS = "<input type='checkbox' id='missoes_quest' title='MISSÕES OFF'><img title='MISSÕES' src='"+hostExterno+"2dT3wtn/powerup-1.gif'>";
}
if(GM_getValue(GladiatusFuncoes.get_server()+"eventoEspecial")==1){
    linha_EVE = "<input type='checkbox' checked='yes' id='eventoEspecial' title='EVENTO ON'><img title='EVENTO' src='"+hostExterno+"SJkHSrd/evento-Oasis.jpg'><br />";
}else{
    linha_EVE = "<input type='checkbox' id='eventoEspecial' title='EVENTO OFF'><img title='EVENTO' src='"+hostExterno+"SJkHSrd/evento-Oasis.jpg'><br />";
}

select_iventario = "<div style='background-color: #deb887;color: #000000; border: 2px solid #daa520;padding: 4px;'>";
if(GM_getValue(GladiatusFuncoes.get_server()+"BotLeilaoLance")==1){
    select_iventario += '<input type="checkbox" checked="yes" id="BotLeilaoLance" title="Lance leilao gladiador ativo, clique para desativar">Proposta Leilão: '+GM_getValue(GladiatusFuncoes.get_server()+"TotalLancesLeilao")+' => '+GladiatusFuncoes.moeda(GM_getValue(GladiatusFuncoes.get_server()+"TotalOuroLeilao"),2,',','.')+'<br />';
}else{
    select_iventario += '<input type="checkbox" id="BotLeilaoLance" title="Lance leilao gladiador inativo, clique para ativar">Proposta Leilão: '+GM_getValue(GladiatusFuncoes.get_server()+"TotalLancesLeilao")+' => '+GladiatusFuncoes.moeda(GM_getValue(GladiatusFuncoes.get_server()+"TotalOuroLeilao"),2,',','.')+'<br />';
}
if(GM_getValue(GladiatusFuncoes.get_server()+"AutoCuraLutador")==1){
    select_iventario += '<input type="checkbox" checked="yes" id="AutoCuraLutador" title="Cura ativada do Lutador, clique para desativar">Auto Alimentação<br />';
}else{
    select_iventario += '<input type="checkbox" id="AutoCuraLutador" title="Cura Lutador inativo, clique para ativar">Auto Alimentação<br />';
}
if(GM_getValue(GladiatusFuncoes.get_server()+"CompraCuraLeilao")==1){
    select_iventario += '<input type="checkbox" checked="yes" id="CompraCuraLeilao" title="Compra cura leilão ativo, clique para desativar">Compra cura leilão: '+GM_getValue(GladiatusFuncoes.get_server()+"TotalCuraLeilao")+' <br />';
}else{
    select_iventario += '<input type="checkbox" id="CompraCuraLeilao" title="Compra cura leilão inativo, clique para ativar">Compra cura leilão: '+GM_getValue(GladiatusFuncoes.get_server()+"TotalCuraLeilao")+' <br />';
}
if(GM_getValue(GladiatusFuncoes.get_server()+"ColocaCuraMochila")==1){
    select_iventario += '<input type="checkbox" checked="yes" id="ColocaCuraMochila" title="Coloca cura mochila ativo, clique para desativar">Coloca cura mochila <br />';
}else{
    select_iventario += '<input type="checkbox" id="ColocaCuraMochila" title="Coloca cura mochila inativo, clique para ativar">Coloca cura mochila <br />';
}
select_iventario += '<article><h2 class="section-header" style="cursor: pointer;">Status BEEP</h2><section style="display: block;">';
if(GM_getValue(GladiatusFuncoes.get_server()+"SomParaExpedicao")==1){
    select_iventario += '<input type="checkbox" checked="yes" id="SomParaExpedicao" title="Beep para expedição ativo, clique para desativar">Beep Expedição <br />';
}else{
    select_iventario += '<input type="checkbox" id="SomParaExpedicao" title="Beem para expedição inativo, clique para ativar">Beep Expedição <br />';
}
if(GM_getValue(GladiatusFuncoes.get_server()+"SomParaMSG")==1){
    select_iventario += '<label for="amsg01">Beep ON</label><input name="SomParaMSG" id="amsg01" type="radio" checked=""><label for="amsg02">Beep OFF</label><input name="SomParaMSG" id="amsg02" type="radio"> <br />';
}else{
    select_iventario += '<label for="amsg01">Beep ON</label><input name="SomParaMSG" id="amsg01" type="radio"><label for="amsg02">Beep OFF</label><input name="SomParaMSG" id="amsg02" type="radio" checked=""> <br />';
}
select_iventario += '</section></article>';
if(GM_getValue(GladiatusFuncoes.get_server()+"desativaEmail")==1){
    select_iventario += '<input type="checkbox" checked="yes" id="desativaEmail" title="Sistema de envio de email quando recebe mensagem ativo, clique para desativar">Envio de email <br />';
}else{
    select_iventario += '<input type="checkbox" id="desativaEmail" title="Envio de email quando receber mensagem desativado, clique para ativar">Envio de email<br />';
}
if(GM_getValue(GladiatusFuncoes.get_server()+"desativaSemOuroMercado")==0){
    select_iventario += '<input type="checkbox" id="desativaSemOuroMercado" title="Coloca sistema em OFF quando mercado tiver sem ouro">Desativa sem Ouro Mercado<br />';
}else{
    select_iventario += '<input type="checkbox" checked="yes" id="desativaSemOuroMercado" title="Continuar ativo mesmo sem ouro mercado">Desativa sem Ouro Mercado<br />';
}
if(GM_getValue(GladiatusFuncoes.get_server()+"lutaSemHonra")==0){
    select_iventario += '<input type="checkbox" id="lutaSemHonra" title="Ativa luta sem honra">Lutar sem honra <br />';
}else{
    select_iventario += '<input type="checkbox" checked="yes" id="lutaSemHonra" title="Desativa luta sem honra">Lutar sem honra <br />';
}
if(GM_getValue(GladiatusFuncoes.get_server()+"avisaGladiador")==0){
    select_iventario += '<input type="checkbox" id="avisaGladiador" title="Ativa som ao ficar Bastante curto"><span id="leilaoGladiador" >Leilão Gladiador: <b> <span class="Load"> </b></span> <br />';
}else{
    select_iventario += '<input type="checkbox" checked="yes" id="avisaGladiador" title="Desativa som ao ficar Bastante curto"><span id="leilaoGladiador" >Leilão Gladiador: <b> <span class="Load"> </b></span> <br />';
}
if(GM_getValue(GladiatusFuncoes.get_server()+"avisaMercenario")==0){
    select_iventario += '<input type="checkbox" id="avisaMercenario" title="Ativa som ao ficar Bastante curto"><span id="leilaoMercenario">Leilão Mercenário: <b> <span class="Load"> </b></span> <br />';
}else{
    select_iventario += '<input type="checkbox" checked="yes" id="avisaMercenario" title="Desativa som ao ficar Bastante curto"><span id="leilaoMercenario">Leilão Mercenário: <b> <span class="Load"> </b></span> <br />';
}

select_iventario += '<span class="tabelaEsquerda2">Pacotes inicial</span><select style="width: 215px;" name="pacotes_atual" id="pacotes_atual">';
select_iventario += '<option value="1">Pacotes I</option>';
select_iventario += '<option value="2">Pacotes II</option>';
select_iventario += '<option value="3">Pacotes III</option>';
select_iventario += '<option value="4">Pacotes IV</option>';
select_iventario += '<option value="5">Pacotes V</option>';
select_iventario += '<option value="6">Pacotes VI</option>';
select_iventario += '</select><br />';
select_iventario += '<span class="tabelaEsquerda2">Iventário inicial</span><select style="width: 215px;" name="iventario_atual" id="iventario_atual">';
select_iventario += '<option value="512">Iventário I</option>';
select_iventario += '<option value="513">Iventário II</option>';
select_iventario += '<option value="514">Iventário III</option>';
select_iventario += '<option value="515">Iventário IV</option>';
select_iventario += '<option value="516">Iventário V</option>';
select_iventario += '<option value="517">Iventário VI</option>';
select_iventario += '<option value="518">Iventário VII</option>';
select_iventario += '<option value="519">Iventário VIII</option>';
select_iventario += '</select><br />';
select_iventario += '<span class="tabelaEsquerda2">Expedição</span><select style="width: 215px;" id="caixa_menu" >';
select_iventario += '<option value="9999">OFF</option>';
select_iventario += '</select><br />';
select_iventario += '<span class="tabelaEsquerda2">Masmorra</span><select style="width: 215px;" id="caixa_menu_masmo" >';
select_iventario += '<option value="0">Masmorra 1</option>';
select_iventario += '<option value="1">Masmorra 2</option>';
select_iventario += '<option value="2">Masmorra 3</option>';
select_iventario += '<option value="3">Masmorra 4</option>';
select_iventario += '<option value="4">Masmorra 5</option>';
select_iventario += '<option value="5">Masmorra 6</option>';
select_iventario += '<option value="6">Masmorra 7</option>';
select_iventario += '<option value="7">Masmorra 8</option>';
select_iventario += '<option value="8">Masmorra 9</option>';
select_iventario += '<option value="9">Masmorra 10</option>';
select_iventario += '</select><br />';
select_iventario += "<span class='tabelaEsquerda2'>Filtro Exp</span><input style=width:175px; type='text' id='txt_filtro_Expe' value='"+GM_getValue(GladiatusFuncoes.get_server()+"filtro_Expe")+"'> <span class='alinhaDireita'><input id='bt_filtro_Expe' type='button' value='ok'></span><br />";
select_iventario += "<span class='tabelaEsquerda2'>Filtro Mas</span><input style=width:175px; type='text' id='txt_filtro_Masm' value='"+GM_getValue(GladiatusFuncoes.get_server()+"filtro_Masm")+"'> <span class='alinhaDireita'><input id='bt_filtro_Masm' type='button' value='ok'></span><br />";
select_iventario += "<span class='tabelaEsquerda2'>Ouro Max</span><input style=width:175px; type='text' id='limit_gold_value' value='"+GM_getValue(GladiatusFuncoes.get_server()+"gold_limit_value")+"'><span class='alinhaDireita'><input id='valider_limit_gold' type='button' value='ok'></span><br />";
select_iventario += "<span class='tabelaEsquerda2'>Intervalos (ml)</span><input style=width:74px; type='text' id='tempoMin' value='"+GM_getValue(GladiatusFuncoes.get_server()+"tempoMin")+"'> à <input style=width:74px; type='text' id='tempoMax' value='"+GM_getValue(GladiatusFuncoes.get_server()+"tempoMax")+"'> <span class='alinhaDireita'><input id='valider_intervalos' type='button' value='ok'></span><br />";
select_iventario += "<span class='tabelaEsquerda2'>Ativo das </span><input style=width:74px; type='text' id='min_Hora' value='"+GM_getValue(GladiatusFuncoes.get_server()+"min_Hora")+"'> à <input style=width:74px; type='text' id='max_Hora' value='"+GM_getValue(GladiatusFuncoes.get_server()+"max_Hora")+"'> <span class='alinhaDireita'><input id='ativo_hora' type='button' value='ok'></span><br />";
select_iventario += "<span class='tabelaEsquerda2'>Nome evento</span><input style=width:100px; type='text' id='nome_evento' value='"+GM_getValue(GladiatusFuncoes.get_server()+"eventoEspecialNome")+"'> Max <input style=width:35px; type='text' id='max_evento' value='"+GM_getValue(GladiatusFuncoes.get_server()+"max_evento")+"'> <span class='alinhaDireita'><input id='bt_eventoEspecialNome' type='button' value='ok'></span><br />";
select_iventario += '</div>';

let tableau = "<table style='width:100%;'>";
tableau += "<tr>";
tableau += "<td colspan='5'>";
tableau += "<div class='itemBarra'>"+
    "Próxima ação: <span  id='img_action_en_cours' align='left'>("+GM_getValue(GladiatusFuncoes.get_server()+"action_encours")+") <img width='20' height='20' src='"+GM_getValue(GladiatusFuncoes.get_server()+"img_action_encours")+"'></span> <br />"+
    "<span class='contadorTempo' id='tempo'>Verificação em "+0+"</span>"+
    linha_ct+linha_ARENA+linha_EXP+linha_MAS+linha_MIS+linha_EVE+
    "<span class='tabelaEsquerda'>Expedição</span>"+GM_getValue(GladiatusFuncoes.get_server()+"contador_Exp")+" &#160&#160 / &#160&#160 "+GM_getValue(GladiatusFuncoes.get_server()+"contador_ExpM")+"&#160&#160["+pEXP+"%]<br />"+
    "<span class='tabelaEsquerda'>Masmorra</span>"+GM_getValue(GladiatusFuncoes.get_server()+"contador_Mas")+" &#160&#160 / &#160&#160 "+GM_getValue(GladiatusFuncoes.get_server()+"contador_MasM")+"&#160&#160["+pMas+"%]<br />"+
    "<span class='tabelaEsquerda'>Arena</span>"+GM_getValue(GladiatusFuncoes.get_server()+"contador_arena")+" &#160&#160 / &#160&#160 "+GM_getValue(GladiatusFuncoes.get_server()+"contador_arenaM")+"&#160&#160["+pAre+"%]<br />"+
    "<span class='tabelaEsquerda'>Circus Turma</span>"+GM_getValue(GladiatusFuncoes.get_server()+"contador_CT")+" &#160&#160 / &#160&#160 "+GM_getValue(GladiatusFuncoes.get_server()+"contador_CTM")+"&#160&#160["+pCTu+"%]<br />"+
    "<span class='tabelaEsquerda'>Próxima Comida</span> <span id='comida'>0</span><br />"+
    "<span class='tabelaEsquerda'>Missões terminada</span><span id='span_quest'>"+GM_getValue(GladiatusFuncoes.get_server()+"nb_quest")+"</span><br />"+
    "<span class='tabelaEsquerda'>Ouro mercado</span><span id='span_ouro'>"+GladiatusFuncoes.moeda(GM_getValue(GladiatusFuncoes.get_server()+"total_shop"),2,',','.')+"</span><br />"+
    "<span class='tabelaEsquerda'>Vitórias "+GM_getValue(GladiatusFuncoes.get_server()+'stat_victoire')+" / Batalhas "+GM_getValue(GladiatusFuncoes.get_server()+'stat_combat')+"</span> ["+percentual+"%]<br />"+
    "<span class='contadorTempoEvento' id='eventoVitorias'></span>"+
    select_iventario+
    "<input class='button2' type='button' id='onoffCT' value='"+GM_getValue(GladiatusFuncoes.get_server()+"gladiatus_cipr_onoff")+"' name='onoffCT'> " +
    "<input class='button2' type='button' id='zerarC' value='Zerar Contadores' name='zerarC'><br />" +
    "</div>";
tableau += "</td>";
tableau += "</tr>";
tableau += "<tr>";
tableau += "<td colspan='5'><span class='panelBlack'>";
tableau += "<img id='message_guilde' class='icone' src='/game/img/premium/token/13.jpg' title='Escrever mensagem coletiva'> ";
tableau += "<img id='vente_alchi' class='icone' src='/game/img/premium/token/18.jpg' title='Alquimista vender'> ";
tableau += "<img id='vente_armure' class='icone' src='/game/img/npc/merc/4.jpg' title='Armaduras vender'> ";
tableau += "<img id='vente_arme' class='icone' src='/game/img/ui/quest/icon_expedition_active.jpg' title='Armeiro vender'> ";
tableau += "<img id='vente_marchandise' class='icone' src='/game/img/powerups/powerup_2.gif' title='Bens Gerais Vender'>  ";
tableau += "<a href='"+GladiatusFuncoes.get_base()+"mod=forge&submod=workbench&sh="+id_sessao+"'><img id='iconeBancada' class='icone' src='https://"+GladiatusFuncoes.get_server()+".gladiatus.gameforge.com/game/9160/img/shop/workbench.png' title='Bancada'></a>";
tableau += "</span></td>";
tableau += "</tr>";
tableau += "</table>";

ArenaForte.sort();
ListaBranca.sort();
let tableau2 = "<table style='width:100%;'>";
tableau2 += "<tr>";
tableau2 += "<td><span class='contadorTempo'>Lista Branca</span>";
tableau2 += "<textarea class='textbarea'>Listando => "+ListaBranca.length+"\n\n\n"+ListaBranca.join("\n")+"</textarea>";
tableau2 += "</td>";
tableau2 += "</tr>";
tableau2 += "<tr>";
tableau2 += "<td>";
tableau2 += "<input class='button2' type='button' id='zerarLB' value='Zerar Lista' name='zerarLB'>";
tableau2 += "</td>";
tableau2 += "</tr>";
tableau2 += "<tr>";
tableau2 += "<td><span class='contadorTempo'>Lista Vermelha</span>";
tableau2 += "<textarea class='textbarea'>Listando => "+ArenaForte.length+"\n\n\n"+ArenaForte.join("\n")+"</textarea>";
tableau2 += "</td>";
tableau2 += "</tr>";
tableau2 += "<tr>";
tableau2 += "<td>";
tableau2 += "<input class='button2' type='button' id='zerarL' value='Zerar Lista' name='zerarL'>";
tableau2 += "</td>";
tableau2 += "</tr>";
tableau2 += "</table>";


let tool_box = document.createElement("div");
tool_box.setAttribute("class","tool_box");

let tool_box2 = document.createElement("div");
tool_box2.setAttribute("class","tool_box2");

tool_box.innerHTML=tableau;
tool_box2.innerHTML=tableau2;
if($("#container_game").length>0){
    document.getElementById("container_game").insertBefore(tool_box,document.getElementById("main"));
    document.getElementById("container_game").insertBefore(tool_box2,document.getElementById("main"));
}else if($("#root").length>0){
    document.getElementById("root").insertBefore(tool_box,document.getElementById("content"));
    document.getElementById("root").insertBefore(tool_box2,document.getElementById("content"));
}
//-----------------------------------------------------------------------------------------------
//div style
//-----------------------------------------------------------------------------------------------
let style = "div.tool_box{";
style += "position:absolute;";
style += "top:0px;right:-340px;";
style += "width:341px;";
style += "z-index:1000;";
style += "}";
style += "div.tool_box2{";
style += "position:absolute;";
style += "top:0px;";
style += "right:950px;";
style += "width:300px;";
style += "z-index:1000;";
style += "border:solid 1px rgb(140,48,10);";
style += "cursor:pointer;";
style += "}";
style += "img.icone{";
style += "border:solid 1px rgb(140,48,10);";
style += "cursor:pointer;";
style += "width:20px;";
style += "height:20px;";
style += "}";
style += "img.icone:hover{";
style += "border:solid 1px rgb(0,0,0);";
style += "width:21px;";
style += "height:21px;";
style += "cursor:pointer;";
style += "}";
style += ".itemBarra{";
style += "display:block;";
style += "text-align:left;";
style += "color: #BFAE54;";
style += "text-decoration: none;";
style += "padding:3px;";
style += "font-weight: bold;";
style += "background-color: #1e0201;";
style += "border:solid 1px #c48b22;";
style += "}";
style += ".contadorTempo{";
style += "display:block;";
style += "background-color: #ffffff;";
style += "border:solid 1px #c48b22;";
style += "color: #F00;";
style += "text-align:center;";
style += "height:20px;";
style += "font-size:16px;";
style += "padding-bottom:3px;";
style += "margin-bottom:2px;";
style += "}";
style += ".contadorTempoEvento{";
style += "display:block;";
style += "background-color: #ffffff;";
style += "border:solid 1px #c48b22;";
style += "/*color: #F00;*/";
style += "/*text-align:center;*/";
style += "height:auto 0;";
style += "font-size:13px;";
style += "padding:5px;";
style += "margin-bottom:2px;";
style += "}";
style += ".panelBlack{";
style += "display:block;";
style += "background-color: #000;";
style += "border:solid 1px #c48b22;";
style += "color: #F00;";
style += "text-align:center;";
style += "height:25px;";
style += "font-size:16px;";
style += "padding-top:5px;";
style += "padding-bottom:3px;";
style += "margin-bottom:2px;";
style += "}";
style += ".tabelaEsquerda{";
style += "display:inline-block;";
style += "width:180px;";
style += "}";
style += ".tabelaEsquerda2{";
style += "display:inline-block;";
style += "width:100px;";
style += "margin-bottom:2px;";
style += "}";
style += ".alinhaDireita{";
style += "float:right;";
style += "}";
style += ".textbarea{";
style += "display:block;";
style += "text-align:left;";
style += "width:287px;";
style += "height:300px;";
style += "color: #BFAE54;";
style += "text-decoration: none;";
style += "padding:3px;";
style += "font-weight: bold;";
style += "background-color: #1e0201;";
style += "border:solid 1px #c48b22;";
style += "}";
style += "span.Load{";
style += "margin: 0 auto;";
style += "display: inline-block;";
style += "width: 16px;";
style += "height: 16px;";
style += "background: url(https://"+GladiatusFuncoes.get_server()+".gladiatus.gameforge.com/game/8855/img/ui/spinner.gif); background-size: 16px 16px;background-repeat: no-repeat;";
style += "}";

let balise_style = document.createElement("style");
balise_style.setAttribute("type","text/css");
balise_style.innerHTML=style;
document.getElementsByTagName("head")[0].insertBefore(balise_style,document.getElementsByTagName("head")[0].firstChild);
/*
document.getElementById("vente_arme").addEventListener("click",function(){
    window.location.href=GladiatusFuncoes.get_base()+"mod=inventory&subsub=2&sub=1&inv="+GladiatusFuncoes.get_inv_position()+"&doll=1&sh="+id_sessao;
},true);

document.getElementById("vente_armure").addEventListener("click",function(){
    window.location.href=GladiatusFuncoes.get_base()+"mod=inventory&subsub=2&sub=2&inv="+GladiatusFuncoes.get_inv_position()+"&doll=1&sh="+id_sessao;
},true);

document.getElementById("message_guilde").addEventListener("click",function(){
    window.location=""+GladiatusFuncoes.get_base()+"mod=guild&submod=adminMail&sh="+id_sessao+"";
},true);

document.getElementById("vente_alchi").addEventListener("click",function(){
    window.location.href=GladiatusFuncoes.get_base()+"mod=inventory&subsub=2&sub=4&inv="+GladiatusFuncoes.get_inv_position()+"&doll=1&sh="+id_sessao;
},true);
*/
//--------------------------------------------------------------------------------------------------
//Botões Tabela
//--------------------------------------------------------------------------------------------------
$('#zerarC').click(function(){
    GM_setValue(GladiatusFuncoes.get_server()+"contador_arena",0);
    GM_setValue(GladiatusFuncoes.get_server()+"contador_CT",0);
    GM_setValue(GladiatusFuncoes.get_server()+"contador_Exp",0)
    GM_setValue(GladiatusFuncoes.get_server()+"contador_Mas",0);
    GM_setValue(GladiatusFuncoes.get_server()+"contador_arenaM",0);
    GM_setValue(GladiatusFuncoes.get_server()+"contador_CTM",0);
    GM_setValue(GladiatusFuncoes.get_server()+"contador_ExpM",0);
    GM_setValue(GladiatusFuncoes.get_server()+"contador_MasM",0);
    GM_setValue(GladiatusFuncoes.get_server()+"stat_victoire",0);
    GM_setValue(GladiatusFuncoes.get_server()+"stat_combat",0);
    GM_setValue(GladiatusFuncoes.get_server()+"nb_quest",0);
    GM_setValue(GladiatusFuncoes.get_server()+"TotalLancesLeilao",0);
    GM_setValue(GladiatusFuncoes.get_server()+"TotalOuroLeilao",0);
    GM_setValue(GladiatusFuncoes.get_server()+"TotalCuraLeilao",0);
    window.location.href=window.location.href;
});
$('#zerarLB').click(function(){
    ListaBranca=[];
    GM_setValue(GladiatusFuncoes.get_server()+"ListaBranca",JSON.stringify(ListaBranca));
    window.location.href=window.location.href;
});
$('#zerarL').click(function(){
    ArenaForte=[];
    GM_setValue(GladiatusFuncoes.get_server()+"ArenaForte",JSON.stringify(ArenaForte));
    window.location.href=window.location.href;
});
$('#onoffCT').click(function(){
    let onoffVClick = $(this).val();
    if ( onoffVClick == 'Sistema Inativo') {
        GM_setValue(GladiatusFuncoes.get_server()+"gladiatus_cipr_onoff", 'Sistema Ativo');
        $(this).val('Sistema Ativo');
    } else if ( onoffVClick == 'Sistema Ativo' ) {
        GM_setValue(GladiatusFuncoes.get_server()+"gladiatus_cipr_onoff", 'Sistema Inativo');
        $(this).val('Sistema Inativo');
    } else if ( onoffVClick == 'undefined' ) {
        GM_setValue(GladiatusFuncoes.get_server()+"gladiatus_cipr_onoff", 'Sistema Inativo');
        $(this).val('Sistema Inativo');
    }
});
$('#bt_filtro_Expe').click(function(){
    GM_setValue(GladiatusFuncoes.get_server()+"filtro_Expe",document.getElementById("txt_filtro_Expe").value);
    window.location.href=window.location.href;
});
$('#bt_filtro_Masm').click(function(){
    GM_setValue(GladiatusFuncoes.get_server()+"filtro_Masm",document.getElementById("txt_filtro_Masm").value);
    window.location.href=window.location.href;
});
$('#valider_limit_gold').click(function(){
    GM_setValue(GladiatusFuncoes.get_server()+"gold_limit_value",document.getElementById("limit_gold_value").value);
    GM_setValue(GladiatusFuncoes.get_server()+"total_shop",1);
    GM_setValue(GladiatusFuncoes.get_server()+"vente_en_cours",0);
    window.location.href=window.location.href;
});
$('#valider_intervalos').click(function(){
    GM_setValue(GladiatusFuncoes.get_server()+"tempoMin",document.getElementById("tempoMin").value);
    GM_setValue(GladiatusFuncoes.get_server()+"tempoMax",document.getElementById("tempoMax").value);
    window.location.href=window.location.href;
});
$('#ativo_hora').click(function(){
    GM_setValue(GladiatusFuncoes.get_server()+"min_Hora",document.getElementById("min_Hora").value);
    GM_setValue(GladiatusFuncoes.get_server()+"max_Hora",document.getElementById("max_Hora").value);
    window.location.href=window.location.href;
});
$('#bt_eventoEspecialNome').click(function(){
    GM_setValue(GladiatusFuncoes.get_server()+"eventoEspecialNome",document.getElementById("nome_evento").value);
    GM_setValue(GladiatusFuncoes.get_server()+"max_evento",document.getElementById("max_evento").value);
});
//-----------------------------------------------------------------------------------------------
//BOX Auto Ataques
//-----------------------------------------------------------------------------------------------
$('#ct_quest').click(function(){
    if(GM_getValue(GladiatusFuncoes.get_server()+"ct_quest")==0){
        GM_setValue(GladiatusFuncoes.get_server()+"ct_quest",1);
    }else{
        GM_setValue(GladiatusFuncoes.get_server()+"ct_quest",0);
    }
    window.location.href=window.location.href;
});
$('#arena_quest').click(function(){
    if(GM_getValue(GladiatusFuncoes.get_server()+"arena_quest")==0){
        GM_setValue(GladiatusFuncoes.get_server()+"arena_quest",1);
    }else{
        GM_setValue(GladiatusFuncoes.get_server()+"arena_quest",0);
    }
    window.location.href=window.location.href;
});
$('#exp_quest').click(function(){
    if(GM_getValue(GladiatusFuncoes.get_server()+"exp_quest")==0){
        GM_setValue(GladiatusFuncoes.get_server()+"exp_quest",1);
    }else{
        GM_setValue(GladiatusFuncoes.get_server()+"exp_quest",0);
    }
    window.location.href=window.location.href;
});
$('#mas_quest').click(function(){
    if(GM_getValue(GladiatusFuncoes.get_server()+"mas_quest")==0){
        GM_setValue(GladiatusFuncoes.get_server()+"mas_quest",1);
    }else{
        GM_setValue(GladiatusFuncoes.get_server()+"mas_quest",0);
    }
    window.location.href=window.location.href;
});
$('#missoes_quest').click(function(){
    if(GM_getValue(GladiatusFuncoes.get_server()+"missoes_quest")==0){
        GM_setValue(GladiatusFuncoes.get_server()+"missoes_quest",1);
    }else{
        GM_setValue(GladiatusFuncoes.get_server()+"missoes_quest",0);
    }
    window.location.href=window.location.href;
});
$('#eventoEspecial').click(function(){
    if(GM_getValue(GladiatusFuncoes.get_server()+"eventoEspecial")==0){
        GM_setValue(GladiatusFuncoes.get_server()+"eventoEspecial",1);
    }else{
        GM_setValue(GladiatusFuncoes.get_server()+"eventoEspecial",0);
    }
    window.location.href=window.location.href;
});

$('#avisaGladiador').click(function(){
    if(GM_getValue(GladiatusFuncoes.get_server()+"avisaGladiador")==0){
        GM_setValue(GladiatusFuncoes.get_server()+"avisaGladiador",1);
    }else{
        GM_setValue(GladiatusFuncoes.get_server()+"avisaGladiador",0);
    }
});

$('#avisaMercenario').click(function(){
    if(GM_getValue(GladiatusFuncoes.get_server()+"avisaMercenario")==0){
        GM_setValue(GladiatusFuncoes.get_server()+"avisaMercenario",1);
    }else{
        GM_setValue(GladiatusFuncoes.get_server()+"avisaMercenario",0);
    }
});
$('#desativaSemOuroMercado').click(function(){
    if(GM_getValue(GladiatusFuncoes.get_server()+"desativaSemOuroMercado")==0){
        GM_setValue(GladiatusFuncoes.get_server()+"desativaSemOuroMercado",1);
    }else{
        GM_setValue(GladiatusFuncoes.get_server()+"desativaSemOuroMercado",0);
    }
});

$('#BotLeilaoLance').click(function(){
    if(GM_getValue(GladiatusFuncoes.get_server()+"BotLeilaoLance")==0){
        GM_setValue(GladiatusFuncoes.get_server()+"BotLeilaoLance",1);
    }else{
        GM_setValue(GladiatusFuncoes.get_server()+"BotLeilaoLance",0);
    }
    window.location.href=window.location.href;
});

$('#AutoCuraLutador').click(function(){
    if(GM_getValue(GladiatusFuncoes.get_server()+"AutoCuraLutador")==0){
        GM_setValue(GladiatusFuncoes.get_server()+"AutoCuraLutador",1);
    }else{
        GM_setValue(GladiatusFuncoes.get_server()+"AutoCuraLutador",0);
    }
    window.location.href=window.location.href;
});

$('#CompraCuraLeilao').click(function(){
    if(GM_getValue(GladiatusFuncoes.get_server()+"CompraCuraLeilao")==0){
        GM_setValue(GladiatusFuncoes.get_server()+"CompraCuraLeilao",1);
    }else{
        GM_setValue(GladiatusFuncoes.get_server()+"CompraCuraLeilao",0);
    }
    window.location.href=window.location.href;
});

$('#ColocaCuraMochila').click(function(){
    if(GM_getValue(GladiatusFuncoes.get_server()+"ColocaCuraMochila")==0){
        GM_setValue(GladiatusFuncoes.get_server()+"ColocaCuraMochila",1);
    }else{
        GM_setValue(GladiatusFuncoes.get_server()+"ColocaCuraMochila",0);
    }
    window.location.href=window.location.href;
});


$('#SomParaExpedicao').click(function(){
    if(GM_getValue(GladiatusFuncoes.get_server()+"SomParaExpedicao")==0){
        GM_setValue(GladiatusFuncoes.get_server()+"SomParaExpedicao",1);
    }else{
        GM_setValue(GladiatusFuncoes.get_server()+"SomParaExpedicao",0);
    }
    window.location.href=window.location.href;
});
$('input[type=radio][name=SomParaMSG]').change(function() {
    if(GM_getValue(GladiatusFuncoes.get_server()+"SomParaMSG")==0){
        GM_setValue(GladiatusFuncoes.get_server()+"SomParaMSG",1);
    }else{
        GM_setValue(GladiatusFuncoes.get_server()+"SomParaMSG",0);
    }
    //window.location.href=window.location.href;
});
$('#desativaEmail').click(function(){
    if(GM_getValue(GladiatusFuncoes.get_server()+"desativaEmail")==0){
        GM_setValue(GladiatusFuncoes.get_server()+"desativaEmail",1);
    }else{
        GM_setValue(GladiatusFuncoes.get_server()+"desativaEmail",0);
    }
    window.location.href=window.location.href;
});

$('#lutaSemHonra').click(function(){
    if(GM_getValue(GladiatusFuncoes.get_server()+"lutaSemHonra")==0){
        GM_setValue(GladiatusFuncoes.get_server()+"lutaSemHonra",1);
    }else{
        GM_setValue(GladiatusFuncoes.get_server()+"lutaSemHonra",0);
    }
});
//-----------------------------------------------------------------------------------------------
//Caixas SELECT
//-----------------------------------------------------------------------------------------------
if($("#iventario_atual").length>0){
    document.getElementById("iventario_atual").addEventListener("change",function(){
        if(this.value!=""){
            GM_setValue(GladiatusFuncoes.get_server()+"iventario_atual",this.value);
        }
    },true);
}else{alert('');
    GM_setValue(GladiatusFuncoes.get_server()+"iventario_atual",513);
}
$("#iventario_atual").val(GM_getValue(GladiatusFuncoes.get_server()+"iventario_atual"));
if($("#pacotes_atual").length>0){
    document.getElementById("pacotes_atual").addEventListener("change",function(){
        if(this.value!=""){
            GM_setValue(GladiatusFuncoes.get_server()+"pacotes_atual",this.value);
        }
    },true);
}else{
    GM_setValue(GladiatusFuncoes.get_server()+"pacotes_atual",0);
}
$("#pacotes_atual").val(GM_getValue(GladiatusFuncoes.get_server()+"pacotes_atual"));

let divMSG = $("#menue_messages>div:eq(0)").text();
if(parseInt(divMSG) >=1){
    GladiatusFuncoes.MensagemSystem(divMSG);
    GM_setValue(GladiatusFuncoes.get_server()+"SomParaMSG",1);
}
if(GM_getValue(GladiatusFuncoes.get_server()+"desativaEmail")==0){
    if(GM_getValue(GladiatusFuncoes.get_server()+"SomParaMSG")==1){
        GladiatusFuncoes.tocaSom();
    }
}

(function() {
    let dataAtual = new Date(),
        ano = dataAtual.getFullYear(),
        mes = GladiatusFuncoes.addZero(dataAtual.getMonth()),
        dia = GladiatusFuncoes.addZero(dataAtual.getDate()),
        valorR = 0,
        timeDefinido1 = new Date(ano,mes,dia,GM_getValue(GladiatusFuncoes.get_server()+"max_Hora").split(":")[0],GM_getValue(GladiatusFuncoes.get_server()+"max_Hora").split(":")[1]),
        timeDefinido2 = new Date(ano,mes,dia,GM_getValue(GladiatusFuncoes.get_server()+"min_Hora").split(":")[0],GM_getValue(GladiatusFuncoes.get_server()+"min_Hora").split(":")[1]);

    GladiatusFuncoes.menu_expedicao();
    $("#caixa_menu").val(GM_getValue(GladiatusFuncoes.get_server()+"expedicao_atual"));
    GladiatusFuncoes.menu_Masmorra();
    $("#caixa_menu_masmo").val(GM_getValue(GladiatusFuncoes.get_server()+"masmorra_atual"));

    if($("#quest_header_cooldown>b>span").length){
        let ticker = $("#quest_header_cooldown>b>span")[0].getAttribute("data-ticker-time-left");
        //var tempoNovaMissao = ticker;
        GM_setValue(GladiatusFuncoes.get_server()+"tempo_nova_missao",ticker);
    }
    $("#mainmenu>a[title='Pantheon']").append("<span id='tempo_missoes'> 00:00:00</span>");
    $("#submenu2>a[href='index.php?mod=location&submod=serverQuest&loc="+GM_getValue(GladiatusFuncoes.get_server()+"eventoEspecialNome")+"&sh="+id_sessao+"']").append("<span id='tempo_evento'> 00:00:00</span>");
    if(window.location.href.indexOf('mod=location&loc=') != -1) {
        GladiatusFuncoes.ChefesExpedicao();
    }
    GladiatusFuncoes.setMissoes();
    //Fim verificacao de mensagem nova
    if (dataAtual.toLocaleTimeString() <= timeDefinido1.toLocaleTimeString() && dataAtual.toLocaleTimeString() >= timeDefinido2.toLocaleTimeString()){
        if (GM_getValue(GladiatusFuncoes.get_server()+"gladiatus_cipr_onoff") == 'Sistema Ativo'){
            setTimeout(function(){window.location.href=window.location.href;}, 300000);
            GladiatusFuncoes.get_stats();
            /*
            let divMSG = $("#menue_messages>div:eq(0)").text();
            if(parseInt(divMSG) >=1){
                GladiatusFuncoes.MensagemSystem(divMSG);
            }
*/
            var limite_gold = GM_getValue(GladiatusFuncoes.get_server()+"gold_limit_value");
            valorR = GladiatusFuncoes.rand(GM_getValue(GladiatusFuncoes.get_server()+"tempoMin"),GM_getValue(GladiatusFuncoes.get_server()+"tempoMax"));
            sangue_perdido = tab_sague_total - tab_sangue; //alert(my_gold +'-' +limite_gold +'-'+GM_getValue(GladiatusFuncoes.get_server()+"total_shop"));
            if(GladiatusFuncoes.get_time_before_evento() == 0 && GM_getValue(GladiatusFuncoes.get_server()+"eventoEspecial")==1){
                GladiatusFuncoes.go_to("evento");
                setTimeout(function(){GladiatusFuncoes.auto_evento();}, valorR);
            }else if(my_gold > limite_gold && GM_getValue(GladiatusFuncoes.get_server()+"total_shop")>=0){//125484-62637
                GladiatusFuncoes.go_to("hide");
                setTimeout(function(){GladiatusFuncoes.auto_hide();}, valorR );
            } else if(GladiatusFuncoes.get_time_before_pEXP()==0 && GM_getValue(GladiatusFuncoes.get_server()+"exp_quest")==1){
                if(GM_getValue(GladiatusFuncoes.get_server()+"SomParaExpedicao")==1){
                    if(GM_getValue(GladiatusFuncoes.get_server()+"desativaEmail")==0){
                        GladiatusFuncoes.tocaSom();
                    }else{
                        GladiatusFuncoes.send_mailNotify('Ataque Expedição---Expedição pronta para desafio');
                    }
                }
                GladiatusFuncoes.go_to("expedicao");
                setTimeout(function(){GladiatusFuncoes.auto_Expedicao();}, valorR);
            } else if(GladiatusFuncoes.get_time_Masmorra() == 0 && GM_getValue(GladiatusFuncoes.get_server()+"mas_quest")==1){
                GladiatusFuncoes.go_to("masmorra");
                setTimeout(function(){GladiatusFuncoes.auto_Masmorra();}, valorR);
            }else if(GladiatusFuncoes.get_time_before_arena() == 0 && GM_getValue(GladiatusFuncoes.get_server()+"arena_quest")==1){
                GladiatusFuncoes.go_to("arene");
                setTimeout(function(){GladiatusFuncoes.auto_arena();}, valorR);
            }else if(GladiatusFuncoes.get_time_before_pro() == 0 && GM_getValue(GladiatusFuncoes.get_server()+"ct_quest")==1){
                GladiatusFuncoes.go_to("ciscusturma");
                setTimeout(function(){GladiatusFuncoes.auto_CT();}, valorR);
            }else if($("#mainmenu>a[title='Pantheon']").text().indexOf("(")!=-1 && GM_getValue(GladiatusFuncoes.get_server()+"missoes_quest")==1){
                GM_setValue(GladiatusFuncoes.get_server()+"verificaMissao",1);
                GM_setValue(GladiatusFuncoes.get_server()+"tempo_nova_missao",20);
                GladiatusFuncoes.go_to("missao");
                valorR = 4000;
                setTimeout(function(){GladiatusFuncoes.auto_missao();}, 4000);
            }else if (GM_getValue(GladiatusFuncoes.get_server()+"verificaMissao") == 1 && GM_getValue(GladiatusFuncoes.get_server()+"missoes_quest")==1){
                GladiatusFuncoes.go_to("missao");
                setTimeout(function(){GladiatusFuncoes.auto_missao();}, valorR);
            }else if(GladiatusFuncoes.get_time_before_quest()<1000 && GM_getValue(GladiatusFuncoes.get_server()+"missoes_quest")==1){
                GladiatusFuncoes.go_to("missao");
                setTimeout(function(){GladiatusFuncoes.auto_missao();}, valorR);
            }else {
                valorR = GladiatusFuncoes.get_time_to_reload();
                setTimeout(function(){window.location.href=window.location.href;}, valorR);
            }
            GladiatusFuncoes.exibirContador(valorR);
        } else {
            GladiatusFuncoes.sysInativo();
        }
    } else {
        //construir novo time para o sonequinha
        GladiatusFuncoes.sonequinha();
    }
    if(GM_getValue(GladiatusFuncoes.get_server()+"avisaMercenario")==1){
        gladiatus.LeilaoMercenarioTempo();
    }
    if(GM_getValue(GladiatusFuncoes.get_server()+"avisaGladiador")==1){
        gladiatus.LeilaoGladiadorTempo();
    }
    if (GM_getValue(GladiatusFuncoes.get_server()+"CompraCuraLeilao") ==1){
        valorR = GladiatusFuncoes.rand(5000,10000);
        setTimeout(function(){gladiatus.LeilaoCompraCuras();}, valorR);
    }
    if (GM_getValue(GladiatusFuncoes.get_server()+"AutoCuraLutador") ==1){
        valorR = GladiatusFuncoes.rand(4000,10000);
        setTimeout(function(){gladiatus.CuraGladiador();}, valorR);
    }
    if (GM_getValue(GladiatusFuncoes.get_server()+"ColocaCuraMochila") ==1){
        gladiatus.GaragemSamu();
    }
    if(GM_getValue(GladiatusFuncoes.get_server()+"eventoEspecialNome")!=''){
        gladiatus.EventoEspecialHighscore();
    }
    if(GM_getValue(GladiatusFuncoes.get_server()+"eventoEspecial")==1){
        gladiatus.EventoEspecial();
    }
    // GladiatusFuncoes.auto_missao();
    //let QuemFight2 = '';
    //ARENA - Marca quem já perdeu...
    if(window.location.href.indexOf("mod=arena&submod=serverArena&aType=2")!=-1){
        let div_players = document.getElementById("own2"), j = 0, tr_player = '', QuemFight = '';
        for(j=1;j<div_players.getElementsByTagName("tr").length;j++){
            tr_player = div_players.getElementsByTagName("tr")[j];
            QuemFight = '[ARENA] ['+tr_player.getElementsByTagName("td")[2].textContent.trim()+'] '+ tr_player.getElementsByTagName("td")[1].textContent.trim()+' '+tr_player.getElementsByTagName("td")[0].textContent.trim();
            //QuemFight2 = '['+tr_player.getElementsByTagName("td")[2].textContent.trim()+'] '+ tr_player.getElementsByTagName("td")[1].textContent.trim()+' '+tr_player.getElementsByTagName("td")[0].textContent.trim();
            if(ListaBranca.indexOf(QuemFight) == -1){}else{
                div_players.getElementsByTagName("tr")[j].style.backgroundColor = "#ffffff";
            }
            if(ArenaForte.indexOf(QuemFight) == -1){}else{
                div_players.getElementsByTagName("tr")[j].style.backgroundColor = "#612d04";
            }
        }
    }
    //CT - Marca quem já perdeu...
    if(window.location.href.indexOf("mod=arena&submod=serverArena&aType=3")!=-1){
        let div_players = document.getElementById("own3"), j = 0, tr_player = '', QuemFight = '';
        for(j=1;j<div_players.getElementsByTagName("tr").length;j++){
            tr_player = div_players.getElementsByTagName("tr")[j];
            QuemFight = '[CT] ['+tr_player.getElementsByTagName("td")[2].textContent.trim()+'] '+ tr_player.getElementsByTagName("td")[1].textContent.trim()+' '+tr_player.getElementsByTagName("td")[0].textContent.trim();
            //QuemFight2 = '['+tr_player.getElementsByTagName("td")[2].textContent.trim()+'] '+ tr_player.getElementsByTagName("td")[1].textContent.trim()+' '+tr_player.getElementsByTagName("td")[0].textContent.trim();
            if(ListaBranca.indexOf(QuemFight) == -1){}else{
                div_players.getElementsByTagName("tr")[j].style.backgroundColor = "#ffffff";
            }
            if(ArenaForte.indexOf(QuemFight) == -1){}else{
                div_players.getElementsByTagName("tr")[j].style.backgroundColor = "#612d04";
            }
        }
    }
    if(GM_getValue(GladiatusFuncoes.get_server()+"CriaBagValor")>1000){
        gladiatus.AdicionaBag();
    }
    if(window.location.href.indexOf("lobby.gladiatus.gameforge.com")!=-1){
        setTimeout(function(){
            if ($(".button-default.button-md").length){
                $(".button-default.button-md").click();
                //window.location.href=window.location.href;
            }
        }, 5000);
    }
})();